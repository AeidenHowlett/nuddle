(this["webpackJsonphello-blockstack"]=this["webpackJsonphello-blockstack"]||[]).push([[0],{1009:function(e,t){},1011:function(e,t){},1034:function(e,t){},1136:function(e,t){},1137:function(e,t){},1163:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=1163},1194:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=1194},1572:function(e,t,a){},1606:function(e,t,a){},1607:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(397),i=a.n(r),c=a(1629),o=a(10),l=a.n(o),u=a(24),m=a(25),d=a(13),h=a(14),p=a(17),f=a(16),g=a(18),v=a(47),y=a(1630),b=a(1627),E=a(1628),k=a(22),O=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),t}(k.Model);O.className="FriendRequest",O.schema={sender:{type:String,decrypted:!0,required:!0},recipient:{type:String,decrypted:!0,required:!0},userGroupId:{type:String,decrypted:!0,required:!0}};var j=a(1614),w=a(1615),S=a(1612),N=a(687),x=a.n(N),C=a(155),M=a.n(C),P=a(688),U=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),t}(k.User);U.schema=Object(P.a)({},k.User.schema,{friends:{type:Array}});var I=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,null,[{key:"b64tobinary",value:function(e){for(var t=atob(e),a=new Array(t.length),n=0;n<t.length;n++)a[n]=t.charCodeAt(n);return new Uint8Array(a)}},{key:"dataURItoBlob",value:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),s=new Uint8Array(n),r=0;r<t.length;r++)s[r]=t.charCodeAt(r);var i=new Blob([n],{type:a});return URL.createObjectURL(i)}},{key:"toBlob",value:function(e){var t=new Blob([e],{type:"image/jpg"});return URL.createObjectURL(t)}}]),e}(),D=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={person:{name:function(){return"Nudist"},avatarUrl:function(){return"/images/logo.jpg"}},profilelUrl:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getProfile()}},{key:"componentDidUpdate",value:function(e){e.username!==this.props.username&&this.getProfile()}},{key:"getProfile",value:function(){var e=this,t=this.props.username;Object(v.lookupProfile)(t).then((function(t){e.setState({person:new v.Person(t)},(function(){return e.getProfilePic()}))})).catch((function(e){}))}},{key:"getProfilePic",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.person,this.props.userSession,fetch(t.avatarUrl(),{method:"GET",mode:"cors"}).then((function(e){e.blob().then((function(e){return URL.createObjectURL(e)})).then((function(e){a.setState({profilelUrl:e})}))}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.person,t=this.props.username;return s.a.createElement("div",{className:"person-top"},s.a.createElement("div",{className:"photos",style:{backgroundImage:"url(".concat(this.state.profilelUrl?this.state.profilelUrl:"/images/logo.jpg",")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}}),s.a.createElement("div",null,s.a.createElement("div",{className:"person-top-name text-truncate"},e.name()),s.a.createElement("div",{className:"person-top-username"},t)))}}]),t}(n.Component),G=a(1611),L=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={friendName:"Nudist",friendAvatar:"/images/logo.jpg"},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getGroupHead()}},{key:"componentDidUpdate",value:function(e){e.group!==this.props.group&&this.getGroupHead()}},{key:"getGroupHead",value:function(){var e=this.props.group;e&&e.attrs.members[0].username===k.User.currentUser()._id?this.setState({friendName:e.attrs.members[1].username}):e&&this.setState({friendName:e.attrs.members[0].username})}},{key:"render",value:function(){var e=this.props.group;return s.a.createElement(G.a,{to:"/chat/".concat(e.attrs._id)},s.a.createElement("div",{className:"friend-item"},s.a.createElement(D,{username:this.state.friendName})))}}]),t}(n.Component),R=a(153),F=a.n(R),_=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={groups:[]},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getMyChats()}},{key:"getMyChats",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,s,r,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.myGroups();case 2:for(t=e.sent,a=[],n=!0,s=!1,r=void 0,e.prev=7,i=t[Symbol.iterator]();!(n=(c=i.next()).done);n=!0)2===(o=c.value).attrs.members.length&&a.push(o);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),s=!0,r=e.t0;case 15:e.prev=15,e.prev=16,n||null==i.return||i.return();case 18:if(e.prev=18,!s){e.next=21;break}throw r;case 21:return e.finish(18);case 22:return e.finish(15);case 23:this.setState({groups:a});case 24:case"end":return e.stop()}}),e,this,[[7,11,15,23],[16,,18,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"getFriends",value:function(){U.findOne({username:k.User.currentUser()._id})}},{key:"sendPhoto",value:function(e){this.props.sendPhoto(e.attrs._id)}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",null,"Friend List"),s.a.createElement("div",null,s.a.createElement("ul",{className:"list-group"},this.state.groups.map((function(t){return s.a.createElement("li",{className:"list-group-item friend-list"},s.a.createElement(L,{group:t,selectChat:e.props.selectChat}),s.a.createElement("button",{className:"btn btn-light add-friend-butt",onClick:e.sendPhoto.bind(e,t)},"Send"))})))))}}]),t}(n.Component),J=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,null,[{key:"createPost",value:function(){var e=Object(u.a)(l.a.mark((function e(a,n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new t({username:k.User.currentUser()._id,caption:a,address:n}),e.next=3,s.save();case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),t}(k.Model);J.className="Post",J.schema={caption:{type:String,decrypted:!0,required:!0},byteArray:{type:ArrayBuffer},base64:{type:String,decrypted:!0},address:{type:String,decrypted:!0}},J.defaults={};var A=a(1613),B=a(173),T=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={caption:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"post",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,s,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.img,n=t.userSession,s=B(),e.next=4,n.putFile("".concat(s,".json"),JSON.stringify(a),{encrypt:!1});case 4:return e.next=6,J.createPost(this.state.caption,s).finally((function(){r.props.closeModal(),r.props.history.push("/")}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({caption:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",{className:"new-post"},s.a.createElement("div",null,s.a.createElement("textarea",{placeholder:"write something juicy",value:this.state.caption,onChange:this.handleChange.bind(this)})),s.a.createElement("div",{className:"new-post-send-list"},s.a.createElement("input",{className:"form-control",placeholder:"Send as post or Slice thru DM"}),s.a.createElement("button",{className:"btn btn-light bg-salmon",onClick:this.post.bind(this),"data-toggle":"tooltip",title:"Send as post"},s.a.createElement(S.a,{color:"white"}))),s.a.createElement(_,{sendPhoto:this.props.sendPhoto}))}}]),t}(n.Component),q=Object(A.a)(T),H=a(398),z=a(691),W=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={color:"#000"},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleChangeComplete",value:function(e){this.setState({background:e.hex}),this.props.setPenColor(e.hex)}},{key:"render",value:function(){return s.a.createElement(z.HuePicker,{color:this.state.background,onChange:this.handleChangeComplete.bind(this)})}}]),t}(n.Component),Y=a(112),K=a.n(Y),X=a(399),$=a.n(X);M.a.setAppElement("body");var Q={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",margin:"50px 0",padding:"0",cameraReady:!1,minWidth:"500px",height:"auto"}},V={width:720,height:1280,facingMode:"user"},Z=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).cam=s.a.createRef(),a._sketch=s.a.createRef(),a.state={img:null,isTakingPicture:!0,showSendOption:!1,penColor:"#000",text:"Click here to edit text",width:$()(window).width(),height:$()(window).height()},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){}},{key:"takePicture",value:function(){var e=this,t=this.cam.current.getScreenshot();this.setState({img:t,isTakingPicture:!1},(function(){return e._onBackgroundImageDrop(t)}))}},{key:"sendPhoto",value:function(e){this.props.sendPhoto(this.state.img.split(",")[1],e),this.props.closeModal()}},{key:"readyToSend",value:function(){var e=this._sketch.current.toDataURL();this.setState({img:e,showSendOption:!0})}},{key:"_onBackgroundImageDrop",value:function(e){this._sketch.current.setBackgroundFromDataUrl(e,{stretched:!0,stretchedX:!1,stretchedY:!1,originX:"left",originY:"top"})}},{key:"_addText",value:function(){this._sketch.current.addText(this.state.text)}},{key:"setPenColor",value:function(e){this.setState({penColor:e})}},{key:"resetPicture",value:function(){this.setState({img:null,isTakingPicture:!0,showSendOption:!1})}},{key:"onUserMedia",value:function(){this.setState({cameraReady:!0})}},{key:"closeModal",value:function(){this.setState({cameraReady:!1}),this.resetPicture(),this.props.closeModal()}},{key:"render",value:function(){var e=this;return s.a.createElement(M.a,{isOpen:this.props.modalIsOpen,onRequestClose:this.closeModal.bind(this),style:Q,contentLabel:"Camera"},s.a.createElement("div",{className:"camera-wrap"},this.state.cameraReady?null:s.a.createElement("div",{className:"loading-wrapper",style:{width:"100%"}},s.a.createElement(K.a,{type:"spinningBubbles",color:"salmon",height:100,width:100}),"Getting camera ready"),this.state.isTakingPicture?s.a.createElement(s.a.Fragment,null,s.a.createElement(x.a,{ref:this.cam,mirrored:!0,onUserMedia:this.onUserMedia.bind(this),height:"500px",width:"auto",videoConstraints:V}),s.a.createElement("button",{className:"camera-button",onClick:function(){e.takePicture()}})):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"photo-taken"},s.a.createElement(H.SketchField,{width:"500px",height:"500px",tool:H.Tools.Pencil,lineColor:this.state.penColor,ref:this._sketch,lineWidth:3}),s.a.createElement("button",{className:"btn camera-reset",onClick:function(){e.resetPicture()}},s.a.createElement(j.a,null)),s.a.createElement("button",{className:"btn",onClick:this._addText.bind(this)},s.a.createElement(w.a,null)),s.a.createElement("button",{className:"camera-button camera-send",onClick:function(){e.readyToSend()}},s.a.createElement(S.a,{color:"rgb(231, 231, 231)"})),s.a.createElement(W,{setPenColor:this.setPenColor.bind(this)})),this.state.showSendOption&&s.a.createElement(q,{userSession:this.props.userSession,img:this.state.img,sendPhoto:this.sendPhoto.bind(this),closeModal:this.props.closeModal}))))}}]),t}(n.Component),ee=a(1616),te=a(1617),ae=a(1618),ne=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={img:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.post;e.attrs.base64?this.setState({img:e.attrs.base64}):this.getImgFromGaia()}},{key:"componentDidUpdate",value:function(e){var t=this.props.post;e.post!==this.props.post&&(t.attrs.base64?this.setState({img:t.attrs.base64}):this.getImgFromGaia())}},{key:"getImgFromGaia",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.post,console.log(t.attrs.username),e.next=4,Object(v.getFile)("".concat(t.attrs.address,".json"),{username:t.attrs.username,decrypt:!1});case 4:return a=e.sent,e.next=7,this.setState({img:JSON.parse(a)||""});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomHeight",value:function(){var e=[450,280,550,480,480,540,420,350,400,380];return e[Math.floor(Math.random()*e.length)]}},{key:"goToImg",value:function(e){this.props.history.push("/p/".concat(e.attrs._id))}},{key:"render",value:function(){var e=this.props.post;return s.a.createElement("div",{className:"masonry-item",onClick:this.goToImg.bind(this,e)},s.a.createElement("div",{style:{position:"relative"}},s.a.createElement("div",{className:"post-card-name"},s.a.createElement("div",null,e.attrs.caption)),s.a.createElement("img",{className:"masonry-content",src:this.state.img,alt:e.attrs.username,height:this.randomHeight()})))}}]),t}(n.Component),se=Object(A.a)(ne),re=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={posts:[],isLoading:!1,feed:"public"},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.posts;return 0===e.length?s.a.createElement("i",{style:{paddingTop:"10px"}},"No nudes posted"):e.map((function(e){return s.a.createElement(se,{post:e})}))}}]),t}(n.Component),ie=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={posts:[],isLoading:!1,feed:"public"},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.fetchPosts().finally((function(){e.setState({isLoading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.cameraModalIsOpen===this.props.cameraModalIsOpen||this.props.cameraModalIsOpen||(this.setState({isLoading:!0}),this.fetchPosts().finally((function(){t.setState({isLoading:!1})})))}},{key:"fetchPosts",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.fetchList({sort:"-createdAt"},{decrypt:!1});case 2:t=e.sent,this.setState({posts:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeFeed",value:function(e){this.setState({feed:e})}},{key:"render",value:function(){return s.a.createElement("div",{className:"home-feed-wrapper col-md-8 container"},s.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},s.a.createElement("a",{className:"mr-2 link link-active feed-tab","data-toggle":"tooltip",title:"Everyone's public posts",onClick:this.changeFeed.bind(this,"public")},"Public"),s.a.createElement("a",{className:"mr-2 link-light link feed-tab","data-toggle":"tooltip",title:"Your friends' private posts",onClick:this.changeFeed.bind(this,"private")},"Private")),this.props.hidden?s.a.createElement("div",{class:"masonry-wrapper"},s.a.createElement("div",{class:"masonry"},s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy1.JPG",alt:"Dummy",width:"auto",height:"400",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy2.JPG",alt:"Dummy",height:"300",width:"auto",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy3.JPG",alt:"Dummy",width:"auto",height:"400",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy4.JPG",alt:"Dummy ",width:"auto",height:"290",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy5.JPG",alt:"Dummy ",width:"auto",height:"240",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy6.JPG",alt:"Dummy ",width:"auto",height:"440",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy7.JPG",alt:"Dummy ",width:"auto",height:"430",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy8.JPG",alt:"Dummy ",width:"auto",height:"500",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy9.JPG",alt:"Dummy ",width:"auto",height:"290",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy10.JPG",alt:"Dummy ",width:"auto",height:"450",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy11.JPG",alt:"Dummy ",width:"auto",height:"550",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy12.JPG",alt:"Dummy ",width:"auto",height:"480",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy13.JPG",alt:"Dummy ",width:"auto",height:"480",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy14.JPG",alt:"Dummy ",width:"auto",height:"480",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy15.JPG",alt:"Dummy ",width:"auto",height:"480",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy16.JPG",alt:"Dummy ",width:"auto",height:"480",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy17.JPG",alt:"Dummy ",width:"auto",height:"480",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy18.JPG",alt:"Dummy ",width:"auto",height:"480",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy19.JPG",alt:"Dummy ",width:"auto",height:"280",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy20.JPG",alt:"Dummy",width:"auto",height:"480",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy21.JPG",alt:"Dummy",width:"auto",height:"480",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy22.JPG",alt:"Dummy ",width:"auto",height:"420",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy23.JPG",alt:"Dummy",width:"auto",height:"250",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy24.JPG",alt:"Dummy",width:"auto",height:"400",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy25.JPG",alt:"Dummy",width:"auto",height:"550",class:"masonry-content"})),s.a.createElement("div",{class:"masonry-item"},s.a.createElement("img",{src:"/images/dummy/dummy26.JPG",alt:"Dummy",width:"auto",height:"300",class:"masonry-content"})))):s.a.createElement("div",{class:"masonry-wrapper"},s.a.createElement("div",{class:"masonry"},this.state.isLoading?s.a.createElement("div",{className:"loading-wrapper"},s.a.createElement(K.a,{type:"spinningBubbles",color:"salmon",height:100,width:100})):"public"===this.state.feed?s.a.createElement(re,{posts:this.state.posts}):"Private feed is in the work")))}}]),t}(n.Component),ce=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={cameraModalIsOpen:!1,hidden:!1},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){}},{key:"openCameraModal",value:function(){this.setState({cameraModalIsOpen:!0})}},{key:"closeCameraModal",value:function(){this.setState({cameraModalIsOpen:!1})}},{key:"onHide",value:function(){this.setState({hidden:!this.state.hidden})}},{key:"render",value:function(){var e=this.props.userSession;return s.a.createElement("div",{className:"home-wrapper container-fluid"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(ie,{userSession:this.props.userSession,cameraModalIsOpen:this.state.cameraModalIsOpen,hidden:this.state.hidden})),this.state.hidden?s.a.createElement("button",{className:"btn home-hide home-button","data-toggle":"tooltip",title:"Show Saucy Pics",onClick:this.onHide.bind(this)},s.a.createElement(ee.a,{size:"24"})):s.a.createElement("button",{className:"btn home-hide home-button","data-toggle":"tooltip",title:"Hide Saucy Pics",onClick:this.onHide.bind(this)},s.a.createElement(te.a,{size:"24"})),e.isUserSignedIn()&&s.a.createElement("button",{className:"btn home-camera home-button","data-toggle":"tooltip",title:"Open Camera",onClick:this.openCameraModal.bind(this)},s.a.createElement(ae.a,{size:"24"})),s.a.createElement(Z,{userSession:this.props.userSession,modalIsOpen:this.state.cameraModalIsOpen,closeModal:this.closeCameraModal.bind(this)})))}}]),t}(n.Component),oe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return"/images/logo.jpg"}}},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSignOut,a=e.userSession,n=this.state.person;return a.isSignInPending()?null:s.a.createElement("div",{className:"panel-welcome",id:"section-2"},s.a.createElement("div",{className:"avatar-section",align:"center"},s.a.createElement("div",{className:"avatar",style:{backgroundImage:"url(".concat(n.avatarUrl()?n.avatarUrl():"/images/logo.jpg",")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}})),s.a.createElement("h1",null,"Hello, ",s.a.createElement("span",{id:"heading-name"},n.name()?n.name():"Nameless Person"),"!"),s.a.createElement("p",{className:"lead"},s.a.createElement("button",{className:"btn btn-primary btn-lg",id:"signout-button",onClick:t.bind(this)},"Logout")))}},{key:"componentWillMount",value:function(){var e=this.props.userSession;this.setState({person:new v.Person(e.loadUserData().profile)})}}]),t}(n.Component),le=(a(1572),a(692)),ue=a.n(le),me=a(693),de=a.n(me),he=a(694),pe=a.n(he),fe=a(695),ge=a.n(fe),ve=a(696),ye=a.n(ve),be=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.handleSignIn;return s.a.createElement("div",{className:"panel-landing"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"menubar"},s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("a",{href:"#",className:"Facebook"},"Facebook")),s.a.createElement("li",null,s.a.createElement("a",{href:"#",className:"Twitter"},"Twitter")),s.a.createElement("li",null,s.a.createElement("a",{href:"#",className:"Instagram"},"Instagram")),s.a.createElement("li",null,s.a.createElement("a",{href:"#",className:"Legal"},"Legal"))))),s.a.createElement("div",{className:"row",style:{paddingTop:"50px"}},s.a.createElement("div",{className:"img-00"}),s.a.createElement("div",{className:"col-sm-6 col-01"},s.a.createElement("h2",null,"Nuddle"),s.a.createElement("p",null,"Nuddle is a decentralized photo sharing app for nudist with military grade encryption that lets you share your nudes to only whomever you allow, no one else. Simply upload and share it with your followers or publicly."),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-4"},s.a.createElement("button",{type:"button",className:"btn btn-black",onClick:e.bind(this)},"Get Started")),s.a.createElement("div",{className:"col-sm-8"},s.a.createElement("span",{style:{fontSize:"14px"}},"By signing up, you confirm you ",s.a.createElement("br",null),"are ",s.a.createElement("span",{style:{fontWeight:"bold"}},"18 years old")," and above")))),s.a.createElement("div",{className:"col-sm-1"}),s.a.createElement("div",{className:"col-sm-5"},s.a.createElement("img",{src:ue.a,className:"img-fluid"}),s.a.createElement("div",{className:"img-01"}))),s.a.createElement("div",{className:"row",style:{paddingTop:"180px"}},s.a.createElement("div",{className:"col-sm-5"},s.a.createElement("div",{className:"img-02"}),s.a.createElement("img",{src:de.a,className:"img-fluid"})),s.a.createElement("div",{className:"col-sm-1"}),s.a.createElement("div",{className:"col-sm-6 col-01"},s.a.createElement("h2",null,"Chat"),s.a.createElement("p",null,"Securely send your photo to only people you know by creating an encrypted chat room that allows you to exchange photo and conversations with self-destructing messages."),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-4"},s.a.createElement("button",{type:"button",className:"btn btn-black",onClick:e.bind(this)},"Get Started")),s.a.createElement("div",{className:"col-sm-8"},s.a.createElement("span",{style:{fontSize:"14px"}},"By signing up, you confirm you ",s.a.createElement("br",null),"are ",s.a.createElement("span",{style:{fontWeight:"bold"}},"18 years old")," and above"))))),s.a.createElement("div",{className:"row",style:{paddingTop:"180px"}},s.a.createElement("div",{className:"col-sm-6 col-01"},s.a.createElement("div",{className:"img-03"}),s.a.createElement("h2",null,"Follow (Coming Soon)"),s.a.createElement("p",null,"Nuddle allows you to follow nudist or content creator so that you'll get up to date notification whenever yout favorite conntent creator uploads an image on Nuddle."),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-4"},s.a.createElement("button",{type:"button",className:"btn btn-black",onClick:e.bind(this)},"Get Started")),s.a.createElement("div",{className:"col-sm-8"},s.a.createElement("span",{style:{fontSize:"14px"}},"By signing up, you confirm you ",s.a.createElement("br",null),"are ",s.a.createElement("span",{style:{fontWeight:"bold"}},"18 years old")," and above")))),s.a.createElement("div",{className:"col-sm-1"}),s.a.createElement("div",{className:"col-sm-5"},s.a.createElement("div",{className:"img-04"}),s.a.createElement("img",{src:pe.a,style:{maxWidth:"85%"},className:"img-fluid"}))),s.a.createElement("div",{className:"row",style:{paddingTop:"180px"}},s.a.createElement("div",{className:"col-sm-5"},s.a.createElement("div",{className:"img-05"}),s.a.createElement("img",{src:ge.a,className:"img-fluid"}),s.a.createElement("img",{src:ye.a,className:"img-fluid"})),s.a.createElement("div",{className:"col-sm-1"}),s.a.createElement("div",{className:"col-sm-6 col-01"},s.a.createElement("h2",null,"Share"),s.a.createElement("p",null,"No longer need to upload your photo on imgur or any other hosting site that could leak or expose your most private photo to hacking. Upload your photo on Nuddle decentralized storage and paste the link anywhere you want."),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-4"},s.a.createElement("button",{type:"button",className:"btn btn-black",onClick:e.bind(this)},"Get Started")),s.a.createElement("div",{className:"col-sm-8"},s.a.createElement("span",{style:{fontSize:"14px"}},"By signing up, you confirm you ",s.a.createElement("br",null),"are ",s.a.createElement("span",{style:{fontWeight:"bold"}},"18 years old")," and above"))),s.a.createElement("div",{className:"img-06"})))))}}]),t}(n.Component),Ee=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={input:"",searchedUsers:[],friends:[]},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getMyFriends()}},{key:"onChangeHandler",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({input:t.target.value}),""===t.target.value.trim()){e.next=7;break}return e.next=4,k.User.fetchList({username:{$regex:t.target.value}});case 4:return a=e.sent,e.next=7,this.setState({searchedUsers:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addFriend",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,s,r,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new k.UserGroup({name:"FriendRequest"}),e.next=3,a.create();case 3:return n=new k.GroupMembership({userGroupId:a._id,username:k.User.currentUser()._id,signingKeyPrivateKey:a.privateKey,signingKeyId:a.attrs.signingKeyId}),e.next=6,n.save();case 6:return e.next=8,a.makeGroupMembership(t);case 8:return s=e.sent,r=new O({sender:k.User.currentUser()._id,recipient:t,userGroupId:a._id,invitationId:s._id}),e.next=12,r.save();case 12:return(i=this.state.friends).push(t),this.setState({friends:i}),e.next=17,U.findOne({username:k.User.currentUser()._id});case 17:return(c=e.sent).update({friends:i}),e.next=21,c.save();case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMyFriends",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.findOne({username:k.User.currentUser()._id});case 2:(t=e.sent).attrs.friends&&this.setState({friends:t.attrs.friends});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isFriend",value:function(e){return!!this.state.friends.includes(e)}},{key:"isMe",value:function(e){return e===k.User.currentUser()._id}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"nav-link"},s.a.createElement("input",{id:"search-input",type:"text",className:"form-control friend-search",placeholder:"Search for Nudist",value:this.state.input,onChange:this.onChangeHandler.bind(this)}),""!==this.state.input&&s.a.createElement("ul",{className:"list-group m-0 p-0",id:"searchedUsers"},this.state.searchedUsers.map((function(t){return s.a.createElement("li",{className:"list-group-item m-0 p-0 seached-user-li"},s.a.createElement(D,{username:t.attrs.username}),e.isFriend(t.attrs.username)||e.isMe(t.attrs.username)?s.a.createElement("div",null):s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-light add-friend-butt",onClick:e.addFriend.bind(e,t.attrs.username)},"Add friend ",s.a.createElement("i",{class:"fas fa-plus"}))))}))))}}]),t}(n.Component),ke=a(259),Oe=a.n(ke),je=a(1619),we=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,null,[{key:"convertDate",value:function(e){var t=new Date(e),a=new Date-t,n=" ago",s=Math.floor(a/1e3);if(s<=60)n=s.toString()+"s ago";else{var r=Math.floor(a/1e3/60);if(r<=60)n=r.toString()+"m ago";else{var i=Math.floor(a/1e3/3600);if(i<=24)n=i.toString(),n+=i>1?" HOURS AGO":" HOUR AGO";else{var c=Math.floor(i/24);if(c<=7)n=c.toString(),n+=c>1?" DAYS AGO":" DAY AGO";else{n=t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}}}}return n}}]),e}(),Se=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={person:{name:function(){return"Anonymous"},avatarUrl:function(){return"/images/logo.jpg"},description:function(){return"No bio"}},friends:[]},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.findOne({username:k.User.currentUser()._id});case 2:(t=e.sent).attrs.friends&&this.setState({friends:t.attrs.friends});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProfile",value:function(){var e=this,t=this.props.fr;Object(v.lookupProfile)(t.attrs.sender).then((function(t){e.setState({person:new v.Person(t)})})).catch((function(e){}))}},{key:"acceptFR",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.fr,e.next=3,Oe.a.findById(t.attrs.invitationId);case 3:return a=e.sent,e.next=6,a.activate();case 6:return(n=this.state.friends).push(t.attrs.sender),this.setState({friends:n}),e.next=11,U.findOne({username:k.User.currentUser()._id});case 11:return(s=e.sent).update({friends:n}),e.next=15,s.save();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isFriend",value:function(e){return!!this.state.friends.includes(e)}},{key:"render",value:function(){var e=this.props.fr;return s.a.createElement("li",{className:"list-group-item seached-user-li"},s.a.createElement(D,{username:e.attrs.sender}),s.a.createElement("div",null,this.isFriend(e.attrs.sender)?s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-light add-friend-butt disabled"},s.a.createElement(je.a,{color:"salmon"}))):s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-light add-friend-butt",onClick:this.acceptFR.bind(this)},"Accept")),s.a.createElement("small",null,we.convertDate(e.attrs.createdAt).toLowerCase())))}}]),t}(n.Component),Ne=a(1620),xe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={frButtonClicked:!1,friendRequests:[],isLoading:!1},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"getFriendRequests",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({frButtonClicked:!this.state.frButtonClicked},Object(u.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.frButtonClicked){e.next=7;break}return t.setState({isloading:!0}),e.next=4,O.fetchList({recipient:k.User.currentUser()._id},{decrypt:!0});case 4:a=e.sent,t.setState({isloading:!1}),t.setState({friendRequests:a});case 7:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"nav-link btn",onClick:this.getFriendRequests.bind(this),"data-toggle":"tooltip",title:"Check friend requests"},s.a.createElement(Ne.a,null)),this.state.frButtonClicked&&s.a.createElement("div",{className:"fr-dropdown"},this.state.isloading?s.a.createElement(K.a,{type:"spinningBubbles",color:"salmon",height:100,width:100}):0===this.state.friendRequests.length?s.a.createElement("div",null,"Aw it's okay little boo if noone wanna see your nud"):s.a.createElement("ul",{className:"list-group friend-request-list"},this.state.friendRequests.map((function(e){return s.a.createElement(Se,{fr:e})})))))}}]),t}(n.Component),Ce=a(1621),Me=a(1622),Pe=a(1623),Ue=a(1624),Ie=a(1625),De=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={searchOpened:!1},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"openSearch",value:function(){this.setState({searchOpened:!0})}},{key:"closeSearch",value:function(){this.setState({searchOpened:!1})}},{key:"render",value:function(){var e=this.props,t=(e.handleSignOut,e.userSession);this.state.person;return s.a.createElement("nav",{className:"navbar p-3 navbar-expand-md bg-light "},t.isUserSignedIn()?s.a.createElement(D,{username:t.loadUserData().username}):s.a.createElement("div",null,s.a.createElement(G.a,{className:"btn btn-outline-dark",id:"signin-button",to:"/signin"},"Get Naked with Blockstack")),s.a.createElement(G.a,{to:"/",className:"navbar-brand d-md-none d-inline"},s.a.createElement("img",{src:"/favicon.ico"})),s.a.createElement("button",{className:"navbar-toggler ml-1",type:"button","data-toggle":"collapse","data-target":"#collapsingNavbar2"},s.a.createElement(Ce.a,{color:"#252631"})),s.a.createElement("div",{className:"navbar-collapse collapse \r w-100",id:"collapsingNavbar2"},s.a.createElement("ul",{className:"nav navbar-nav col-md-5 d-flex justify-content-end align-items-center"},s.a.createElement("li",{className:"nav-item my-auto"},s.a.createElement(G.a,{className:"nav-link navbar-brand mx-0 d-none d-md-inline",to:"/"},"Nuddle"))),t.isUserSignedIn()&&s.a.createElement("ul",{className:"nav navbar-nav col-md-7  flex-nowrap"},s.a.createElement("div",{className:"d-flex col justify-content-end"},s.a.createElement("li",null,this.state.searchOpened?s.a.createElement(Ee,{closeSearch:this.closeSearch.bind(this)}):s.a.createElement("div",{className:"nav-link",onMouseEnter:this.openSearch.bind(this)},s.a.createElement(Me.a,null))),s.a.createElement("li",{className:"nav-item","data-toggle":"tooltip",title:"Friend Requests"},s.a.createElement(xe,null))),s.a.createElement("div",{className:"d-flex col-md-6 justify-content-between align-items-center"},s.a.createElement("div",{className:"d-flex"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(G.a,{className:"nav-link",to:"/chat","data-toggle":"tooltip",title:"Chat"},s.a.createElement(Pe.a,null))),s.a.createElement("li",{className:"nav-item","data-toggle":"tooltip",title:"Refresh feed"},s.a.createElement(G.a,{to:"/",className:"nav-link"},s.a.createElement(Ue.a,null))),s.a.createElement("li",{className:"nav-item","data-toggle":"tooltip",title:"Log Out"},s.a.createElement("a",{className:"nav-link",onClick:this.props.handleSignOut},s.a.createElement(Ie.a,null))))))))}}]),t}(n.Component);M.a.setAppElement("body");var Ge={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"500px"}},Le=(n.Component,function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={newChatModalIsOpen:!1,groups:[]},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.getMyChats()}},{key:"getMyChats",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,s,r,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.UserGroup.myGroups();case 2:for(t=e.sent,a=[],n=!0,s=!1,r=void 0,e.prev=7,i=t[Symbol.iterator]();!(n=(c=i.next()).done);n=!0)2===(o=c.value).attrs.members.length&&a.push(o);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),s=!0,r=e.t0;case 15:e.prev=15,e.prev=16,n||null==i.return||i.return();case 18:if(e.prev=18,!s){e.next=21;break}throw r;case 21:return e.finish(18);case 22:return e.finish(15);case 23:this.setState({groups:a});case 24:case"end":return e.stop()}}),e,this,[[7,11,15,23],[16,,18,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"openNewChatModal",value:function(){this.setState({newChatModalIsOpen:!0})}},{key:"closeNewChatModal",value:function(){this.setState({newChatModalIsOpen:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"chat-list-wrapper"},s.a.createElement("div",null,s.a.createElement("h1",null,"Chats")),s.a.createElement("div",{className:"chat-list"},0===this.state.groups.length?"You don't have any saucy convo yet. Initite some":this.state.groups.map((function(t){return s.a.createElement(L,{group:t,selectChat:e.props.selectChat})}))))}}]),t}(n.Component)),Re=a(260),Fe=a(1626),_e=a(699),Je=(a(1604),function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,null,[{key:"sendTextMsg",value:function(){var e=Object(u.a)(l.a.mark((function e(a,n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new t({sender:k.User.currentUser()._id,content:a,type:"text",userGroupId:n}),e.next=3,s.save();case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"sendPhotoMsg",value:function(){var e=Object(u.a)(l.a.mark((function e(a,n){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new t({sender:k.User.currentUser()._id,byte:a,type:"photo",userGroupId:n}),e.next=3,s.save();case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"sendExpirablePhotoMsg",value:function(){var e=Object(u.a)(l.a.mark((function e(a,n,s){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new t({content:a,type:"expirable-photo",duration:n,userGroupId:s}),e.next=3,r.save();case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),t}(k.Model));Je.className="Message",Je.schema={sender:{type:String,required:!0},content:{type:String},byte:{type:ArrayBuffer},type:{type:String,required:!0},duration:{type:Number},userGroupId:{type:String,decrypted:!0,required:!0}},Je.defaults={};var Ae=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={newComment:"",characters:1e3,showEmojiPicker:!1,cameraModalIsOpen:!1},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){}},{key:"addEmoji",value:function(e){this.setState({newComment:this.state.newComment+e.native,characters:this.state.characters+1})}},{key:"setNewComment",value:function(e){this.state.characters<1e3&&(this.setState({newComment:e.target.value,characters:e.target.value.length}),e.target.value.length)}},{key:"sendMessage",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=14;break}return t.preventDefault(),e.prev=2,e.next=5,Je.sendTextMsg(this.state.newComment,this.props.chatRoomId);case 5:return a=e.sent,e.next=8,this.props.sendMessage(a);case 8:return e.next=10,this.setState({newComment:"",characters:1e3});case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"sendPhoto",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.userSession,n=I.b64tobinary(t),e.prev=2,e.next=5,Je.sendPhotoMsg(n,a);case 5:return s=e.sent,e.next=8,this.props.sendMessage(s);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target.value.substring(0,999);this.setState({newComment:t,characters:1e3-e.target.value.length})}},{key:"toggleEmojiPicker",value:function(){this.setState({showEmojiPicker:!this.state.showEmojiPicker})}},{key:"openCameraModal",value:function(){this.setState({cameraModalIsOpen:!0})}},{key:"closeCameraModal",value:function(){this.setState({cameraModalIsOpen:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"input-wrapper"},s.a.createElement("div",null,s.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:" column "}},s.a.createElement("textarea",{id:"commentInput",type:"text",className:"form-control",placeholder:"Drop a thought...",value:this.state.newComment,onChange:this.handleChange.bind(this),onKeyDown:function(t){return e.sendMessage(t)}}),s.a.createElement("div",{style:{alignSelf:"flex-end"}},s.a.createElement("small",null,this.state.characters,"/",1e3)))),s.a.createElement("div",{className:"emoji-div",style:{alignSelf:"flex-start",position:"relative"}},s.a.createElement("button",{type:"button ",className:"btn btn-emoji","data-toggle":"tooltip",title:"Insert an emoji",onClick:this.toggleEmojiPicker.bind(this),style:{paddingTop:"5px"}},s.a.createElement(Fe.a,{size:"24"})),s.a.createElement("button",{className:"btn btn-emoji",onClick:this.openCameraModal.bind(this)},s.a.createElement(ae.a,{size:"24"})),this.state.showEmojiPicker&&s.a.createElement(_e.a,{set:"emojione",onSelect:this.addEmoji.bind(this)})),s.a.createElement(Z,{userSession:this.props.userSession,modalIsOpen:this.state.cameraModalIsOpen,closeModal:this.closeCameraModal.bind(this),sendPhoto:this.sendPhoto.bind(this)}))}}]),t}(n.Component),Be=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){}},{key:"isMyMsg",value:function(e){return e===k.User.currentUser()._id}},{key:"render",value:function(){var e=this.props.msg;return s.a.createElement("div",{className:"msg-item-wrapper"},s.a.createElement("div",{className:"msg-item "+(this.isMyMsg(e.attrs.sender)?"my-msg":"")},s.a.createElement("div",{style:{padding:"0px 10px"}},s.a.createElement("div",{className:"photos",style:{backgroundImage:"url(".concat("/images/logo.jpg",")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}})),s.a.createElement("div",null,s.a.createElement("i",null,e.attrs.sender),s.a.createElement("div",{className:"msg-body"},"text"===e.attrs.type&&s.a.createElement("div",null,e.attrs.content),"photo"===e.attrs.type&&s.a.createElement("img",{src:I.toBlob(this.props.msg.attrs.byte),width:"200px"}),s.a.createElement("small",{className:"timestamp"},we.convertDate(e.attrs.createdAt))))))}}]),t}(n.Component),Te=a(689),qe=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={messageList:[],img:"",isLoading:!1};return Je.addStreamListener(function(e){e.attrs.userGroupId===a.props.match.params.chatRoomId&&a.fetchMessages()}.bind(Object(Re.a)(a))),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.chatRoomId&&this.fetchMessages()}},{key:"startLoading",value:function(){this.setState({isLoading:!0})}},{key:"endLoading",value:function(){this.setState({isLoading:!1})}},{key:"componentDidUpdate",value:function(e){var t=this;e.match.params.chatRoomId!==this.props.match.params.chatRoomId&&this.props.match.params.chatRoomId&&(this.startLoading(),this.fetchMessages().finally((function(){return t.endLoading()})))}},{key:"fetchMessages",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.fetchList({userGroupId:this.props.match.params.chatRoomId});case 2:t=e.sent,this.setState({messageList:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(e){var t=this.state.messageList;t.push(e),this.setState({messageList:t})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"chat-room-wrapper"},s.a.createElement("div",{className:"chat-room"},this.props.match.params.chatRoomId?this.state.isLoading?s.a.createElement(K.a,{type:"spinningBubbles",color:"salmon",height:100,width:100}):0===this.state.messageList.length?s.a.createElement("i",null,"You don't have any message with this nudist. Spice it up now ;)"):this.state.messageList.map((function(t){return s.a.createElement(Be,{msg:t,userSession:e.props.userSession})})):s.a.createElement("div",null,"Select a friend to nuddle")),s.a.createElement(Ae,{userSession:this.props.userSession,sendMessage:this.sendMessage.bind(this),chatRoomId:this.props.match.params.chatRoomId}))}}]),t}(n.Component),He=Object(Te.a)(qe),ze=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={selectedFriend:null},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"selectChat",value:function(e){this.setState({selectedFriend:e})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"chat-wrapper"},s.a.createElement(Le,{selectChat:this.selectChat.bind(this)}),s.a.createElement(He,{userSession:this.props.userSession,selectedFriend:this.state.selectedFriend}))}}]),t}(n.Component),We=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={post:{attrs:{username:"Nudist",base64:null,address:null}},img:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.match.params.postId?this.getPost():this.props.history.push("/")}},{key:"getPost",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.postId,e.next=3,J.findOne({_id:t},{decrypt:!1});case 3:(a=e.sent)?this.setState({post:a},(function(){n.state.post.attrs.base64?n.setState({img:n.state.post.attrs.base64}):n.getImgFromGaia()})):this.props.history.push("/");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getImgFromGaia",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.post,a=this.props.userSession,e.next=4,a.getFile("".concat(t.attrs.address,".json"),{username:t.attrs.username,decrypt:!1});case 4:return n=e.sent,e.next=7,this.setState({img:JSON.parse(n)||""});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.post,a=e.img;return s.a.createElement("div",{className:"single-post-wrapper"},s.a.createElement("div",{className:"single-post"},s.a.createElement("button",{className:"btn btn-outline-light delete-button"},s.a.createElement(j.a,{color:"#f8f9fa"})),s.a.createElement("img",{src:a}),s.a.createElement("p",null,t.attrs.caption)))}}]),t}(n.Component),Ye=new v.AppConfig(["store_write","publish_data"]),Ke=new v.UserSession({appConfig:Ye});Object(k.configure)({apiServer:"https://nuddle-server.herokuapp.com",userSession:Ke}),v.config.logLevel="none";var Xe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={userSession:Ke},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleSignIn",value:function(e){e.preventDefault(),Ke.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),Ke.signUserOut(window.location.origin)}},{key:"render",value:function(){var e,t,a,n,r,i,c=this;return s.a.createElement("div",{className:"site-wrapper"},Ke.isUserSignedIn()?s.a.createElement(s.a.Fragment,null,s.a.createElement(De,{userSession:Ke,handleSignOut:this.handleSignOut.bind(this)}),s.a.createElement("div",{className:"inner-wrapper"},s.a.createElement(y.a,null,s.a.createElement(b.a,(e={exact:!0,path:"/"},Object(m.a)(e,"exact",!0),Object(m.a)(e,"render",(function(e){return s.a.createElement(ce,Object.assign({},e,{userSession:Ke,handleSignIn:c.handleSignIn}))})),e)),s.a.createElement(b.a,(t={exact:!0,path:"/profile"},Object(m.a)(t,"exact",!0),Object(m.a)(t,"render",(function(e){return s.a.createElement(oe,Object.assign({},e,{userSession:Ke,handleSignOut:c.handleSignOut.bind(c)}))})),t)),s.a.createElement(b.a,(a={exact:!0,path:"/chat"},Object(m.a)(a,"exact",!0),Object(m.a)(a,"render",(function(e){return s.a.createElement(ze,Object.assign({},e,{userSession:Ke}))})),a)),s.a.createElement(b.a,(n={exact:!0,path:"/chat/:chatRoomId"},Object(m.a)(n,"exact",!0),Object(m.a)(n,"render",(function(e){return s.a.createElement(ze,Object.assign({},e,{userSession:Ke}))})),n)),s.a.createElement(b.a,(r={exact:!0,path:"/camera"},Object(m.a)(r,"exact",!0),Object(m.a)(r,"render",(function(e){return s.a.createElement(Z,e)})),r)),s.a.createElement(b.a,(i={exact:!0,path:"/p/:postId"},Object(m.a)(i,"exact",!0),Object(m.a)(i,"render",(function(e){return s.a.createElement(We,Object.assign({},e,{userSession:Ke}))})),i)),s.a.createElement(E.a,{to:"/"})))):s.a.createElement(be,{userSession:Ke,handleSignIn:this.handleSignIn}))}},{key:"componentDidMount",value:function(){var e=this;Ke.isSignInPending()&&Ke.handlePendingSignIn().then(function(){var t=Object(u.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.history.replaceState({},document.title,"/"),e.setState({userData:a}),t.next=4,k.User.createWithCurrentUser();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),t}(n.Component);a(1605),a(1606);i.a.render(s.a.createElement(c.a,null,s.a.createElement(Xe,null)),document.getElementById("root"))},692:function(e,t,a){e.exports=a.p+"static/media/User_Content_Image.5b920b83.svg"},693:function(e,t,a){e.exports=a.p+"static/media/Group229.b75fae34.svg"},694:function(e,t,a){e.exports=a.p+"static/media/Group-230.56460879.svg"},695:function(e,t,a){e.exports=a.p+"static/media/Group-227.6c466b61.svg"},696:function(e,t,a){e.exports=a.p+"static/media/Group-228.ee6b2910.svg"},700:function(e,t,a){e.exports=a(1607)},715:function(e,t){},717:function(e,t){},732:function(e,t){},734:function(e,t){},895:function(e,t){}},[[700,1,2]]]);
//# sourceMappingURL=main.47c3bed6.chunk.js.map