{"version":3,"sources":["../node_modules/jsdom/lib/jsdom sync","../node_modules/parse5/lib sync","models/FriendRequest.js","models/BlockstackUser.js","Shared/photo.js","Person/PersonTop.jsx","Chat/ChatListItem.jsx","Chat/FriendList.jsx","models/Post.js","Post/NewPost.jsx","Camera/CameraTools.jsx","Camera/CameraModal.jsx","Home/PostCard.jsx","Home/HomeFeed.jsx","Home/Home.jsx","Profile/Profile.jsx","Nav/Signin.jsx","Nav/FriendSearch.jsx","Shared/timestamp.js","Nav/FriendRequestItem.jsx","Nav/FriendRequests.jsx","Nav/Nav.jsx","Chat/NewChat.jsx","Chat/ChatList.jsx","models/Message.js","Chat/MessageInput.jsx","Chat/MessageItem.jsx","Chat/ChatRoom.jsx","Chat/Chat.jsx","Post/SinglePost.jsx","App.jsx","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","FriendRequest","Model","className","schema","sender","type","String","decrypted","required","recipient","userGroupId","BlockstackUser","User","friends","Array","Photo","b64Data","byteCharacters","atob","byteNumbers","length","i","charCodeAt","Uint8Array","dataURI","byteString","split","mimeString","ab","ArrayBuffer","ia","blob","Blob","URL","createObjectURL","byteData","console","log","PersonTop","props","state","person","name","avatarUrl","profilelUrl","this","getProfile","prevProps","username","lookupProfile","then","profile","setState","Person","getProfilePic","catch","error","userSession","fetch","method","mode","response","url","style","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","Component","ChatListItem","friendName","friendAvatar","getGroupHead","group","attrs","members","currentUser","_id","Link","to","FriendList","groups","getMyChats","userGroup","myGroups","finalGroups","push","findOne","sendPhoto","Fragment","map","selectChat","onClick","bind","Post","caption","blobId","post","address","save","byteArray","base64","defaults","uuidv4","require","NewPost","img","putFile","JSON","stringify","encrypt","createPost","finally","closeModal","history","event","target","value","placeholder","onChange","handleChange","data-toggle","title","color","withRouter","CameraTools","background","hex","setPenColor","handleChangeComplete","Modal","setAppElement","customStyles","content","top","left","right","bottom","marginRight","transform","margin","padding","cameraReady","minWidth","height","videoConstraints","width","facingMode","CameraModal","cam","React","createRef","_sketch","isTakingPicture","showSendOption","penColor","text","$","window","_img","current","getScreenshot","_onBackgroundImageDrop","chatRoomId","toDataURL","setBackgroundFromDataUrl","stretched","stretchedX","stretchedY","originX","originY","addText","resetPicture","isOpen","modalIsOpen","onRequestClose","contentLabel","ref","mirrored","onUserMedia","takePicture","tool","Tools","Pencil","lineColor","lineWidth","_addText","readyToSend","PostCard","getImgFromGaia","getFile","decrypt","parse","heights","Math","floor","random","goToImg","position","src","alt","randomHeight","HomeFeed","posts","isLoading","fetchPosts","cameraModalIsOpen","fetchList","sort","href","hidden","class","paddingTop","Home","onHide","size","isUserSignedIn","openCameraModal","closeCameraModal","Profile","handleSignOut","isSignInPending","align","loadUserData","Signin","handleSignIn","FriendSearch","input","searchedUsers","getMyFriends","trim","$regex","_searchedUsers","fr","UserGroup","create","groupMembership","GroupMembership","signingKeyPrivateKey","privateKey","signingKeyId","makeGroupMembership","memberShip","request","invitationId","_friends","me","update","includes","onChangeHandler","user","isFriend","isMe","addFriend","TimeStamp","posted","postedTime","Date","timeDiff","timeString","secDiff","toString","minDiff","hourDiff","dayDiff","toLocaleDateString","year","month","day","FriendRequestItem","description","groupInvitation","findById","invitation","activate","acceptFR","convertDate","createdAt","toLowerCase","FriendRequests","frButtonClicked","friendRequests","a","async","isloading","_requests","getFriendRequests","Nav","searchOpened","data-target","closeSearch","onMouseEnter","openSearch","ChatList","newChatModalIsOpen","Message","txt","msg","binary","byte","duration","Number","MessageInput","newComment","characters","showEmojiPicker","emoji","native","key","preventDefault","sendTextMsg","newMessage","sendMessage","b64tobinary","sendPhotoMsg","appropriateLengthWords","substring","TEXT_LIMIT","display","flexDirection","onKeyDown","alignSelf","toggleEmojiPicker","set","onSelect","addEmoji","MessageItem","isMyMsg","toBlob","ChatRoom","messageList","addStreamListener","message","match","params","fetchMessages","startLoading","endLoading","messages","_messages","Chat","selectedFriend","SinglePost","postId","getPost","appConfig","AppConfig","UserSession","configure","apiServer","config","logLevel","App","redirectToSignIn","signUserOut","location","origin","Switch","Route","exact","path","Redirect","handlePendingSignIn","userData","replaceState","document","createWithCurrentUser","ReactDOM","render","BrowserRouter","getElementById"],"mappings":"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","file":"static/js/main.56e5f8c2.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1217;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1248;","import { Model } from 'radiks';\r\n\r\nexport default class FriendRequest extends Model {\r\n    static className = 'FriendRequest';\r\n    static schema = {\r\n      sender: { type: String, decrypted : true, required : true }, \r\n      recipient: {type: String, decrypted : true,  required : true },\r\n      userGroupId : {type: String, decrypted : true,  required : true }\r\n    };\r\n}\r\n","import { User } from 'radiks';\r\n\r\n// For example I want to add a public name on my user model\r\nexport default class BlockstackUser extends User {\r\n  static schema = {\r\n    ...User.schema,\r\n    friends: {\r\n      type: Array,\r\n      // decrypted: true,\r\n    },\r\n  };\r\n}","export default class Photo {\r\n  static b64tobinary(b64Data) {\r\n    const byteCharacters = atob(b64Data);\r\n    const byteNumbers = new Array(byteCharacters.length);\r\n    for (let i = 0; i < byteCharacters.length; i++) {\r\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n    }\r\n    return new Uint8Array(byteNumbers);\r\n  }\r\n  static dataURItoBlob(dataURI) {\r\n    // convert base64 to raw binary data held in a string\r\n    // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\r\n    var byteString = atob(dataURI.split(',')[1]);\r\n  \r\n    // separate out the mime component\r\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\r\n  \r\n    // write the bytes of the string to an ArrayBuffer\r\n    var ab = new ArrayBuffer(byteString.length);\r\n  \r\n    // create a view into the buffer\r\n    var ia = new Uint8Array(ab);\r\n  \r\n    // set the bytes of the buffer to the correct values\r\n    for (var i = 0; i < byteString.length; i++) {\r\n        ia[i] = byteString.charCodeAt(i);\r\n    }\r\n  \r\n    // write the ArrayBuffer to a blob, and you're done\r\n    var blob = new Blob([ab], {type: mimeString});\r\n    return URL.createObjectURL(blob);\r\n\r\n    // return blob;\r\n  \r\n  }\r\n  static toBlob(byteData){\r\n    console.log(byteData)\r\n    const blob = new Blob([byteData], {type: 'image/jpg'});\r\n    return URL.createObjectURL(blob);\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport { User } from 'radiks';\r\nimport { Person, lookupProfile, UserSession, getFile } from 'blockstack';\r\nimport BlockstackUser from '../models/BlockstackUser';\r\nimport Photo from '../Shared/photo';\r\nconst defaultProfile = '/images/logo.jpg';\r\n\r\nexport default class PersonTop extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      person: {\r\n        name() {\r\n          return 'Nudist';\r\n        },\r\n        avatarUrl() {\r\n          return defaultProfile;\r\n        }\r\n      },\r\n      profilelUrl: ''\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getProfile();\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.username !== this.props.username) {\r\n      this.getProfile();\r\n    }\r\n  }\r\n  getProfile() {\r\n    const { username } = this.props;\r\n    lookupProfile(username)\r\n      .then(profile => {\r\n        this.setState({\r\n          person: new Person(profile)\r\n        }, () => this.getProfilePic());\r\n      })\r\n      .catch(error => {});\r\n  }\r\n  async getProfilePic(){\r\n    const {person} = this.state;\r\n    const {userSession} = this.props;\r\n    console.log(person.avatarUrl())\r\n    // const profileUrl =await getFile('1PcWxogPMAg99ay4iuKE4aDdhpKwfXTvJs//avatar-0')\r\n    // const url = Photo.toBlob(profileUrl);\r\n    // this.setState({\r\n    //   profileUrl : url\r\n    // })\r\n    fetch(person.avatarUrl(),  {method: \"GET\", mode: 'cors'})\r\n    .then((response) => {\r\n      response.blob()\r\n      .then((blob) => URL.createObjectURL(blob))\r\n      .then((url) => {\r\n        this.setState({\r\n          profilelUrl : url\r\n        })\r\n      })\r\n    })\r\n  }\r\n  render() {\r\n    const { person } = this.state;\r\n    const { username } = this.props;\r\n\r\n    return (\r\n      <div className='person-top'>\r\n        <div\r\n          className='photos'\r\n          style={{\r\n            backgroundImage: `url(${\r\n              this.state.profilelUrl ? this.state.profilelUrl : defaultProfile\r\n            })`,\r\n            backgroundPosition: 'center',\r\n            backgroundSize: 'cover',\r\n            backgroundRepeat: 'no-repeat'\r\n          }}\r\n        />\r\n        {/* <img src={this.state.profilelUrl}/> */}\r\n        <div>\r\n          <div className='person-top-name text-truncate'>{person.name()}</div>\r\n          <div className='person-top-username'>{username}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { User, UserGroup } from \"radiks\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PersonTop from \"../Person/PersonTop\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\nexport default class ChatListItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      friendName: \"Nudist\",\r\n      friendAvatar: defaultProfile\r\n    };\r\n  }\r\n  componentDidMount(){\r\n    this.getGroupHead()\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps){\r\n    if (prevProps.group !== this.props.group){\r\n      this.getGroupHead()\r\n    }\r\n  }\r\n\r\n  getGroupHead(){\r\n    const { group } = this.props;\r\n\r\n    if (group && group.attrs.members[0].username === User.currentUser()._id) {\r\n      this.setState({\r\n        friendName : group.attrs.members[1].username\r\n      })\r\n    } else if (group){\r\n      this.setState({\r\n        friendName : group.attrs.members[0].username\r\n      })\r\n    }\r\n  }\r\n  render() {\r\n    const { group } = this.props;\r\n    return (\r\n      <Link to={`/chat/${group.attrs._id}`}>\r\n        <div className=\"friend-item\">\r\n          <PersonTop username = {this.state.friendName}/>\r\n        </div>\r\n      </Link>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { User } from \"radiks\";\r\nimport { Person, lookupProfile } from \"blockstack\";\r\nimport BlockstackUser from \"../models/BlockstackUser\";\r\nimport PersonTop from \"../Person/PersonTop\";\r\nimport ChatListItem from \"./ChatListItem\";\r\nimport userGroup from \"radiks/lib/models/user-group\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\n\r\nexport default class FriendList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      groups: []\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getMyChats();\r\n  }\r\n  async getMyChats() {\r\n    const groups = await userGroup.myGroups();\r\n    let finalGroups = [];\r\n    for (let group of groups) {\r\n      if (group.attrs.members.length === 2) {\r\n        finalGroups.push(group);\r\n      }\r\n    }\r\n    this.setState({\r\n      groups: finalGroups\r\n    });\r\n  }\r\n  getFriends() {\r\n    const me = BlockstackUser.findOne({ username: User.currentUser()._id });\r\n  }\r\n\r\n  sendPhoto(group){\r\n    this.props.sendPhoto(group.attrs._id)\r\n  }\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <h1>Friend List</h1>\r\n        <div>\r\n          <ul className=\"list-group\">\r\n            {this.state.groups.map(group => {\r\n              return (\r\n                <li className=\"list-group-item friend-list\">\r\n                  {/* <PersonTop username=\"tateyeetman.id.blockstack\"/>\r\n                  <div>\r\n                    <button\r\n                      className=\"btn btn-light add-friend-butt\"\r\n                      onClick={this.props.selectFriend}\r\n                    >\r\n                      Send\r\n                    </button>\r\n                  </div> */}\r\n                  <ChatListItem\r\n                    group={group}\r\n                    selectChat={this.props.selectChat}\r\n                  />\r\n                  <button\r\n                    className=\"btn btn-light add-friend-butt\"\r\n                    onClick={this.sendPhoto.bind(this, group)}\r\n                  >\r\n                    Send\r\n                  </button>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","import { Model, User } from \"radiks\";\r\n\r\nexport default class Post extends Model {\r\n  static className = \"Post\";\r\n  static schema = {\r\n    // username : {\r\n    //   type: String,\r\n    //   decrypted : true,\r\n    //   required : true\r\n    // },\r\n    caption: {\r\n      type: String,\r\n      decrypted : true,\r\n      required : true\r\n    },\r\n    byteArray: {\r\n      type: ArrayBuffer,\r\n      // decrypted : true\r\n      // required : true\r\n    },\r\n    base64: {\r\n      type: String,\r\n      decrypted : true,\r\n      // required : true\r\n    },\r\n    address: {\r\n      type: String, //Gaia address\r\n      decrypted : true,\r\n      // required : true\r\n    }\r\n    // userGroupId: {\r\n    //   type: String,\r\n    //   decrypted: true,\r\n    //   required : true\r\n    // }\r\n\r\n  };\r\n  static defaults = {\r\n  }\r\n  static async createPost(caption, blobId){\r\n    const post = new Post({\r\n      username : User.currentUser()._id,\r\n      caption : caption,\r\n      // base64 : base64,\r\n      address : blobId\r\n    })\r\n    await post.save()\r\n    return post;\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport {\r\n  Person,\r\n} from 'blockstack';\r\nimport FriendList from '../Chat/FriendList';\r\nimport { Send } from 'react-feather';\r\nimport Post from '../models/Post';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Photo from '../Shared/photo';\r\nconst uuidv4 = require('uuid/v4');\r\n\r\n\r\nclass NewPost extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      caption : '',\r\n    }\r\n  }\r\n \r\n  async post(){\r\n    const {img, userSession} = this.props;\r\n    const blobId = uuidv4()\r\n\r\n    await userSession.putFile(`${blobId}.json`, JSON.stringify(img),{ encrypt: false })\r\n\r\n    Post.createPost(this.state.caption, blobId).finally(()=> {\r\n      this.props.closeModal()\r\n      this.props.history.push(`/`)\r\n    });\r\n\r\n  }\r\n  handleChange(event) {\r\n    this.setState({\r\n      caption: event.target.value,\r\n    });\r\n  }\r\n  \r\n \r\n  render(){\r\n    return(\r\n      <div className=\"new-post\">\r\n        <div>\r\n        <textarea placeholder=\"write something juicy\" \r\n         value={this.state.caption}\r\n         onChange={this.handleChange.bind(this)}></textarea>\r\n        </div>\r\n        <div className=\"new-post-send-list\">\r\n          <input className=\"form-control\" placeholder=\"Send as post or Slice thru DM\"/>\r\n          <button className=\"btn btn-light bg-salmon\" onClick={this.post.bind(this)} data-toggle=\"tooltip\" title=\"Send as post\">\r\n            <Send color={'white'}/></button>\r\n        </div>\r\n        <FriendList sendPhoto={this.props.sendPhoto}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default withRouter(NewPost)","import React, { Component } from \"react\";\r\nimport { HuePicker } from \"react-color\";\r\n\r\nexport default class CameraTools extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      color : '#000'\r\n    };\r\n  }\r\n  handleChangeComplete(color) {\r\n    this.setState({ background: color.hex });\r\n    this.props.setPenColor(color.hex)\r\n  }\r\n  render() {\r\n    return (\r\n      <HuePicker\r\n        color={this.state.background}\r\n        onChange={this.handleChangeComplete.bind(this)}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Camera, XCircle, Send, Type } from \"react-feather\";\r\nimport Webcam from \"react-webcam\";\r\nimport Modal from \"react-modal\";\r\nimport NewPost from \"../Post/NewPost\";\r\nimport { SketchField, Tools } from \"react-sketch\";\r\nimport CameraTools from \"./CameraTools\";\r\nimport ReactLoading from \"react-loading\";\r\nimport $ from \"jquery\";\r\n\r\nModal.setAppElement(\"body\");\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    margin: \"50px 0\",\r\n    padding : \"0\",\r\n    cameraReady: false,\r\n    minWidth : '500px',\r\n    height: 'auto',\r\n   \r\n  }\r\n};\r\nconst videoConstraints = {\r\n  width: 720,\r\n  height: 1280,\r\n  facingMode: \"user\"\r\n};\r\nexport default class CameraModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.cam = React.createRef();\r\n    this._sketch = React.createRef();\r\n    this.state = {\r\n      img: null,\r\n      isTakingPicture: true,\r\n      showSendOption: false,\r\n      penColor: \"#000\",\r\n      text: \"Click here to edit text\",\r\n      width: $(window).width(),\r\n      height: $(window).height(),\r\n    };\r\n  } //monkey monkey monkey monkey monkey monkey monkey monkey\r\n\r\n  componentDidMount(){\r\n    console.log(this.state.width, this.state.height)\r\n  }\r\n  takePicture() {\r\n    const _img = this.cam.current.getScreenshot();\r\n\r\n    this.setState({ img: _img, isTakingPicture: false }, () =>\r\n      this._onBackgroundImageDrop(_img)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * send picture via chat\r\n   */\r\n  sendPhoto(chatRoomId) {\r\n    this.props.sendPhoto(this.state.img.split(\",\")[1], chatRoomId);\r\n    this.props.closeModal();\r\n  }\r\n\r\n  /**\r\n   * when user ready click show friendlist\r\n   */\r\n  readyToSend() {\r\n    const _img = this._sketch.current.toDataURL();\r\n    this.setState({\r\n      img: _img,\r\n      showSendOption: true\r\n    });\r\n  }\r\n\r\n  _onBackgroundImageDrop(img) {\r\n    let sketch = this._sketch.current;\r\n    sketch.setBackgroundFromDataUrl(img, {\r\n      stretched: true,\r\n      stretchedX: false,\r\n      stretchedY: false,\r\n      originX: \"left\",\r\n      originY: \"top\"\r\n    });\r\n  }\r\n\r\n  _addText() {\r\n    this._sketch.current.addText(this.state.text);\r\n  }\r\n\r\n  setPenColor(color) {\r\n    this.setState({\r\n      penColor: color\r\n    });\r\n  }\r\n  resetPicture() {\r\n    this.setState({ img: null, isTakingPicture: true, showSendOption: false });\r\n  }\r\n  onUserMedia() {\r\n    this.setState({\r\n      cameraReady: true\r\n    });\r\n  }\r\n  closeModal() {\r\n    this.setState({\r\n      cameraReady: false\r\n    });\r\n    this.resetPicture();\r\n    this.props.closeModal();\r\n  }\r\n  render() {\r\n    return (\r\n      <Modal\r\n        isOpen={this.props.modalIsOpen}\r\n        onRequestClose={this.closeModal.bind(this)}\r\n        style={customStyles}\r\n        contentLabel=\"Camera\"\r\n      >\r\n        <div className=\"camera-wrap\">\r\n          {!this.state.cameraReady ? (\r\n            <div className=\"loading-wrapper\" style={{width : '100%'}}>\r\n              <ReactLoading\r\n                type={\"spinningBubbles\"}\r\n                color={\"salmon\"}\r\n                height={100}\r\n                width={100}\r\n              />\r\n              Getting camera ready\r\n            </div>\r\n          ) : null}\r\n          {this.state.isTakingPicture ? (\r\n            <>\r\n              <Webcam\r\n                ref={this.cam}\r\n                mirrored={true}\r\n                onUserMedia={this.onUserMedia.bind(this)}\r\n                height={'500px'}\r\n                width={'auto'}\r\n                videoConstraints={videoConstraints}\r\n              />\r\n              <button\r\n                className=\"camera-button\"\r\n                onClick={() => {\r\n                  this.takePicture();\r\n                }}\r\n              ></button>\r\n            </>\r\n          ) : (\r\n            <React.Fragment>\r\n              <div className=\"photo-taken\">\r\n                <SketchField\r\n                  width=\"500px\"\r\n                  height=\"500px\"\r\n                  tool={Tools.Pencil}\r\n                  lineColor={this.state.penColor}\r\n                  ref={this._sketch}\r\n                  lineWidth={3}\r\n                />\r\n                <button\r\n                  className=\"btn camera-reset\"\r\n                  onClick={() => {\r\n                    this.resetPicture();\r\n                  }}\r\n                >\r\n                  <XCircle />\r\n                </button>\r\n                <button className=\"btn\" onClick={this._addText.bind(this)}>\r\n                  <Type />\r\n                </button>\r\n                <button\r\n                  className=\"camera-button camera-send\"\r\n                  onClick={() => {\r\n                    this.readyToSend();\r\n                  }}\r\n                >\r\n                  <Send color=\"rgb(231, 231, 231)\" />\r\n                </button>\r\n                <CameraTools setPenColor={this.setPenColor.bind(this)} />\r\n              </div>\r\n              {this.state.showSendOption && (\r\n                <NewPost\r\n                  userSession={this.props.userSession}\r\n                  img={this.state.img}\r\n                  sendPhoto={this.sendPhoto.bind(this)}\r\n                  closeModal={this.props.closeModal}\r\n                />\r\n              )}\r\n            </React.Fragment>\r\n          )}\r\n        </div>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport Photo from '../Shared/photo';\r\nimport PersonTop from '../Person/PersonTop';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nconst defaultProfile = '/images/logo.jpg';\r\n\r\nclass PostCard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      img: ''\r\n    };\r\n  }\r\n  componentDidMount() {\r\n   this.getImgFromGaia();\r\n  }\r\n\r\n  componentDidUpdate(prevProps){\r\n    if(prevProps.post !== this.props.post){\r\n      this.getImgFromGaia();\r\n    }\r\n  }\r\n\r\n  async getImgFromGaia(){\r\n    const {post, userSession} = this.props;\r\n    console.log(post.attrs.address)\r\n    const img = await userSession.getFile(`${post.attrs.address}.json`,{ decrypt: false })\r\n    await this.setState({\r\n      img : JSON.parse(img) || ''\r\n    })\r\n  }\r\n\r\n  randomHeight(){\r\n    const heights = [450, 280,\r\n      550,\r\n      480,\r\n      200,\r\n      540,\r\n      380,\r\n      300,\r\n      400,\r\n      350\r\n      ]\r\n    return heights[Math.floor(Math.random() * heights.length)]\r\n  }\r\n  goToImg(post) {\r\n    this.props.history.push(`/p/${post.attrs._id}`);\r\n  }\r\n  render() {\r\n    const { post, userSession } = this.props;\r\n    return (\r\n      <div className='masonry-item' onClick={this.goToImg.bind(this,post)}>\r\n        <div style={{ position: 'relative' }}>\r\n          <div className='post-card-name'>\r\n            <div>{post.attrs.caption}</div>\r\n            {/* <PersonTop username={post.attrs.username} /> */}\r\n          </div>\r\n          <img className='masonry-content' src={this.state.img} alt={post.attrs.username} height={this.randomHeight()} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(PostCard);\r\n","import React, { Component } from \"react\";\r\nimport PostCard from \"./PostCard\";\r\nimport Post from \"../models/Post\";\r\nimport ReactLoading from \"react-loading\";\r\n\r\nexport default class HomeFeed extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      posts: [],\r\n      isLoading: false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.setState({\r\n      isLoading: true\r\n    });\r\n    this.fetchPosts().finally(() => {\r\n      this.setState({\r\n        isLoading: false\r\n      });\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      prevProps.cameraModalIsOpen !== this.props.cameraModalIsOpen &&\r\n      !this.props.cameraModalIsOpen\r\n    ) {\r\n      this.setState({\r\n        isLoading: true\r\n      });\r\n      this.fetchPosts().finally(() => {\r\n        this.setState({\r\n          isLoading: false\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  async fetchPosts() {\r\n    const posts = await Post.fetchList({ sort: \"-createdAt\" }, {decrypt : false});\r\n\r\n    this.setState({\r\n      posts: posts\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"home-feed-wrapper col-md-8 container\">\r\n        <div className=\"d-flex justify-content-center align-items-center\">\r\n          <a className=\"mr-2 link link-active\" href=\"/\">\r\n            Public\r\n          </a>\r\n          <a className=\"mr-2 link-light link\" href=\"/\">\r\n            Subscribed\r\n          </a>\r\n          <a href=\"/\" className=\"link link-light\">\r\n            Collection\r\n          </a>\r\n        </div>\r\n        {!this.props.hidden ? \r\n        <div class=\"masonry-wrapper\">\r\n          <div class=\"masonry\">\r\n            {this.state.isLoading ? (\r\n               <div className=\"loading-wrapper\" >\r\n              <ReactLoading\r\n                type={\"spinningBubbles\"}\r\n                color={\"salmon\"}\r\n                height={100}\r\n                width={100}\r\n              />\r\n              </div>\r\n            ) : this.state.posts.length === 0 ? (\r\n              <i style={{ paddingTop: \"10px\" }}>No nudes posted</i>\r\n            ) : (\r\n              this.state.posts.map(post => {\r\n                return post.attrs.address && <PostCard \r\n                userSession={this.props.userSession}\r\n                post={post} />;\r\n              })\r\n            )}\r\n          </div>\r\n        </div>\r\n        :\r\n        <div class=\"masonry-wrapper\">\r\n            <div class=\"masonry\">\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://unsplash.it/529/529/\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://unsplash.it/534/529/\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://unsplash.it/525/529/\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/450?image=200\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/280?image=300\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/540?image=400\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/380?image=500\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/300?image=600\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/400?image=700\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/300?image=800\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/280?image=900\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/480?image=925\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/550?image=950\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/600?image=1000\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/325?image=25\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/450?image=50\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/280?image=75\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/540?image=100\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/380?image=125\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/300?image=161\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/400?image=175\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/300?image=200\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/280?image=225\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/480?image=250\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/550?image=275\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/600?image=300\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/325?image=13\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/450?image=26\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/280?image=39\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/540?image=52\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://picsum.photos/450/380?image=65\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://unsplash.it/524/524/\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://unsplash.it/524/525/\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://unsplash.it/524/529/\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://unsplash.it/524/524/\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://unsplash.it/524/525/\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"https://unsplash.it/524/529/\"\r\n                  alt=\"Dummy \"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { UserGroup } from \"radiks/lib\";\r\nimport FriendRequest from \"../models/FriendRequest\";\r\nimport CameraModal from \"../Camera/CameraModal\";\r\nimport { Camera, EyeOff, Eye } from \"react-feather\";\r\nimport HomeFeed from \"./HomeFeed\";\r\nimport HomeMessage from \"./HomeMessage\";\r\n\r\nexport default class Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      cameraModalIsOpen: false,\r\n      hidden: false\r\n    };\r\n  }\r\n  componentDidMount() {}\r\n\r\n  openCameraModal() {\r\n    this.setState({\r\n      cameraModalIsOpen: true\r\n    });\r\n  }\r\n  closeCameraModal() {\r\n    this.setState({\r\n      cameraModalIsOpen: false\r\n    });\r\n  }\r\n  onHide() {\r\n    this.setState({\r\n      hidden: !this.state.hidden\r\n    });\r\n  }\r\n  render() {\r\n    const {userSession} = this.props;\r\n    return (\r\n      <div className=\"home-wrapper container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <HomeFeed\r\n              userSession={this.props.userSession}\r\n              cameraModalIsOpen={this.state.cameraModalIsOpen}\r\n              hidden={this.state.hidden}\r\n            />\r\n          </div>\r\n          {/* <div className=\"col-md-3\">\r\n            <HomeMessage />\r\n          </div> */}\r\n          {this.state.hidden ? (\r\n            <button\r\n              className=\"btn home-hide home-button\"\r\n              data-toggle=\"tooltip\"\r\n              title=\"Show Saucy Pics\"\r\n              onClick={this.onHide.bind(this)}\r\n            >\r\n              <Eye size=\"24\" />\r\n            </button>\r\n          ) : (\r\n            <button\r\n              className=\"btn home-hide home-button\"\r\n              data-toggle=\"tooltip\"\r\n              title=\"Hide Saucy Pics\"\r\n              onClick={this.onHide.bind(this)}\r\n            >\r\n              <EyeOff size=\"24\" />\r\n            </button>\r\n          )}\r\n          {userSession.isUserSignedIn() && <button\r\n            className=\"btn home-camera home-button\"\r\n            data-toggle=\"tooltip\"\r\n            title=\"Open Camera\"\r\n            onClick={this.openCameraModal.bind(this)}\r\n          >\r\n            <Camera size=\"24\" />\r\n          </button>}\r\n          <CameraModal\r\n            userSession={this.props.userSession}\r\n            modalIsOpen={this.state.cameraModalIsOpen}\r\n            closeModal={this.closeCameraModal.bind(this)}\r\n            //  postPhoto={this.sendPhoto.bind(this)}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\nimport {\n  Person,\n} from 'blockstack';\n\nconst avatarFallbackImage = '/images/logo.jpg';\n\nexport default class Profile extends Component {\n  constructor(props) {\n  \tsuper(props);\n\n  \tthis.state = {\n  \t  person: {\n  \t  \tname() {\n          return 'Anonymous';\n        },\n  \t  \tavatarUrl() {\n  \t  \t  return avatarFallbackImage;\n  \t  \t},\n  \t  },\n  \t};\n  }\n\n  render() {\n    const { handleSignOut, userSession } = this.props;\n    const { person } = this.state;\n    return (\n      !userSession.isSignInPending() ?\n      <div className=\"panel-welcome\" id=\"section-2\">\n        <div className=\"avatar-section\" align=\"center\">\n        <div\n                className=\"avatar\"\n                style={{\n                  backgroundImage: `url(${\n                    person.avatarUrl()\n                      ? person.avatarUrl()\n                      : avatarFallbackImage\n                  })`,\n                  backgroundPosition: \"center\",\n                  backgroundSize: \"cover\",\n                  backgroundRepeat: \"no-repeat\"\n                }}\n              />\n        </div>\n        <h1>Hello, <span id=\"heading-name\">{ person.name() ? person.name() : 'Nameless Person' }</span>!</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signout-button\"\n            onClick={ handleSignOut.bind(this) }\n          >\n            Logout\n          </button>\n        </p>\n      </div> : null\n    );\n  }\n\n  componentWillMount() {\n    const { userSession } = this.props;\n    this.setState({\n      person: new Person(userSession.loadUserData().profile),\n    });\n  }\n}\n","import React, { Component } from 'react';\r\n\r\nexport default class Signin extends Component {\r\n\r\n  render() {\r\n    const { handleSignIn } = this.props;\r\n\r\n    return (\r\n      <div className=\"panel-landing\" >\r\n        <div className=\"panel-head\">\r\n\r\n        <h1 className=\"landing-heading\">Welcome to Nuddle</h1>\r\n        <i>Nuddle is a secure space where you can share your saucy photos with your mates. \r\n          {/* All your private photos are encrypted and only have access by you and the people who you want to share with. */}\r\n          </i>\r\n        </div>\r\n        <div>\r\n\r\n        <img src=\"/images/demo.gif\" width=\"700px\"/>\r\n        </div>\r\n        <div>\r\n\r\n          <button\r\n            className=\"btn btn-outline-dark btn-lg\"\r\n            id=\"signin-button\"\r\n            onClick={ handleSignIn.bind(this) }\r\n          >\r\n            Get Naked with Blockstack\r\n          </button>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { User, UserGroup, GroupMembership } from \"radiks\";\r\nimport FriendRequest from \"../models/FriendRequest\";\r\nimport userGroup from \"radiks/lib/models/user-group\";\r\nimport PersonTop from \"../Person/PersonTop\";\r\nimport BlockstackUser from \"../models/BlockstackUser\";\r\n\r\nexport default class FriendSearch extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      input: \"\",\r\n      searchedUsers: [],\r\n      friends: []\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getMyFriends();\r\n  }\r\n  async onChangeHandler(e) {\r\n    this.setState({\r\n      input: e.target.value\r\n    });\r\n    if (e.target.value.trim() !== \"\") {\r\n      const _searchedUsers = await User.fetchList({\r\n        username: { $regex: e.target.value }\r\n      });\r\n      await this.setState({\r\n        searchedUsers: _searchedUsers\r\n      });\r\n    }\r\n  }\r\n  async addFriend(recipient) {\r\n    const fr = new UserGroup({\r\n      name: \"FriendRequest\"\r\n    });\r\n    await fr.create();\r\n    const groupMembership = new GroupMembership({\r\n      userGroupId: fr._id,\r\n      username: User.currentUser()._id,\r\n      signingKeyPrivateKey: fr.privateKey,\r\n      signingKeyId: fr.attrs.signingKeyId\r\n    });\r\n\r\n    await groupMembership.save();\r\n    const memberShip = await fr.makeGroupMembership(recipient);\r\n    const request = new FriendRequest({\r\n      sender: User.currentUser()._id,\r\n      recipient: recipient,\r\n      userGroupId: fr._id,\r\n      invitationId: memberShip._id\r\n    });\r\n    await request.save();\r\n\r\n    const _friends = this.state.friends;\r\n    _friends.push(recipient);\r\n    this.setState({\r\n      friends : _friends\r\n    })\r\n    const me = await BlockstackUser.findOne({\r\n      username: User.currentUser()._id\r\n    });\r\n    me.update({\r\n      friends: _friends\r\n    });\r\n    await me.save();\r\n  }\r\n  async getMyFriends() {\r\n    const me = await BlockstackUser.findOne({\r\n      username: User.currentUser()._id\r\n    });\r\n    if (me.attrs.friends) {\r\n      this.setState({\r\n        friends: me.attrs.friends\r\n      });\r\n    }\r\n  }\r\n  isFriend(username) {\r\n    if (this.state.friends.includes(username)) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  isMe(username) {\r\n    if (username === User.currentUser()._id) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"nav-link\">\r\n        <input\r\n          id=\"search-input\"\r\n          type=\"text\"\r\n          className=\"form-control friend-search\"\r\n          // style={{ fontFamily: 'Arial, FontAwesome' }}\r\n          placeholder=\"Search for Nudist\"\r\n          value={this.state.input}\r\n          onChange={this.onChangeHandler.bind(this)}\r\n          // onBlur={this.props.closeSearch}\r\n          // onMouseLeave={this.props.closeSearch}\r\n        />\r\n        {this.state.input !== \"\" && (\r\n          <ul className=\"list-group m-0 p-0\" id=\"searchedUsers\">\r\n            {this.state.searchedUsers.map(user => {\r\n              return (\r\n                <li className=\"list-group-item m-0 p-0 seached-user-li\">\r\n                  <PersonTop username={user.attrs.username} />\r\n                  {this.isFriend(user.attrs.username) ||\r\n                  this.isMe(user.attrs.username) ? (\r\n                    <div></div>\r\n                  ) : (\r\n                    <div>\r\n                      <button\r\n                        className=\"btn btn-light add-friend-butt\"\r\n                        onClick={this.addFriend.bind(this, user.attrs.username)}\r\n                      >\r\n                        Add friend <i class=\"fas fa-plus\"></i>\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default class TimeStamp {\r\n    static convertDate(posted) {\r\n        var postedTime = new Date(posted);\r\n        var currentTime = new Date();\r\n        var timeDiff = currentTime - postedTime;\r\n        var timeString = \" ago\";\r\n\r\n        var secDiff = Math.floor(timeDiff / 1000);\r\n        if(secDiff <= 60) {\r\n            timeString = secDiff.toString()+\"s ago\"\r\n        } else {\r\n            var minDiff = Math.floor(timeDiff / 1000 / 60);\r\n            if(minDiff <= 60) {\r\n                timeString = minDiff.toString()+\"m ago\"\r\n            } else {\r\n                var hourDiff=  Math.floor(timeDiff / 1000 / 3600);\r\n                \r\n                if (hourDiff <= 24) {\r\n                    timeString = hourDiff.toString() \r\n                    if (hourDiff > 1){\r\n                        timeString+=\" HOURS AGO\";\r\n                    } else{\r\n                        timeString+=\" HOUR AGO\";\r\n                    }\r\n                } else {\r\n                    var dayDiff = Math.floor(hourDiff/24);\r\n                    if (dayDiff <=7) {\r\n                        timeString = dayDiff.toString();\r\n                        if (dayDiff > 1){\r\n                            timeString+=\" DAYS AGO\";\r\n                        } else{\r\n                            timeString+=\" DAY AGO\";\r\n                        }\r\n                    } else {\r\n                        var options = { year : 'numeric', month: 'long', day : 'numeric' }\r\n                        timeString = postedTime.toLocaleDateString('en-US',options)\r\n                    }   \r\n                }\r\n            }\r\n        }\r\n        // this.setState({\r\n        //     timePosted : timeString\r\n        // })\r\n        return timeString\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { User } from \"radiks\";\r\nimport { Person, lookupProfile } from \"blockstack\";\r\nimport groupInvitation from \"radiks/lib/models/group-invitation\";\r\nimport PersonTop from \"../Person/PersonTop\";\r\nimport BlockstackUser from \"../models/BlockstackUser\";\r\nimport { CheckCircle } from \"react-feather\";\r\nimport TimeStamp from \"../Shared/timestamp\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\n\r\nexport default class FriendRequestItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      person : {\r\n        name() {\r\n          return \"Anonymous\";\r\n        },\r\n        avatarUrl() {\r\n          return defaultProfile;\r\n        },\r\n        description() {\r\n          return \"No bio\";\r\n        }\r\n      },\r\n      friends : []\r\n    };\r\n  }\r\n\r\n  async componentDidMount(){\r\n    const me = await BlockstackUser.findOne({ username: User.currentUser()._id });\r\n    if (me.attrs.friends) {\r\n      this.setState({\r\n        friends : me.attrs.friends\r\n      })\r\n    }\r\n  }\r\n  getProfile() {\r\n    const {fr} = this.props;\r\n\r\n    lookupProfile(fr.attrs.sender)\r\n      .then(profile => {\r\n        this.setState({\r\n          person: new Person(profile)\r\n        });\r\n      })\r\n      .catch(error => {\r\n      });\r\n  }\r\n  async acceptFR(){\r\n    const {fr} = this.props;\r\n    const invitation = await groupInvitation.findById(fr.attrs.invitationId);\r\n    await invitation.activate();\r\n    const _friends = this.state.friends;\r\n    _friends.push(fr.attrs.sender);\r\n    this.setState({\r\n      friends : _friends\r\n    })\r\n    const me = await BlockstackUser.findOne({ username: User.currentUser()._id });\r\n    me.update({\r\n      friends  : _friends\r\n    })\r\n    await me.save()\r\n  }\r\n  isFriend(username){\r\n    if (this.state.friends.includes(username)){\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n \r\n  render(){\r\n    const {fr} = this.props;\r\n\r\n    return(\r\n        <li className=\"list-group-item seached-user-li\">\r\n            \r\n            <PersonTop username={fr.attrs.sender}/>\r\n            <div>\r\n            {this.isFriend(fr.attrs.sender) ? \r\n            <div>\r\n              <button className=\"btn btn-light add-friend-butt disabled\">\r\n                <CheckCircle color=\"salmon\"/>\r\n               </button>\r\n            </div>\r\n            :\r\n             <div>\r\n               <button className=\"btn btn-light add-friend-butt\" onClick={this.acceptFR.bind(this)}>\r\n                 Accept \r\n               </button>\r\n             </div>\r\n            }\r\n            <small>\r\n            {TimeStamp.convertDate(fr.attrs.createdAt).toLowerCase()}\r\n            </small>\r\n            </div>\r\n           </li>\r\n    )\r\n  }\r\n}","\r\nimport React, { Component } from \"react\";\r\nimport BlockstackUser from \"../models/BlockstackUser\";\r\nimport { User, UserGroup, GroupInvitation } from \"radiks\";\r\nimport FriendRequest from \"../models/FriendRequest\";\r\nimport userGroup from \"radiks/lib/models/user-group\";\r\nimport ReactLoading from 'react-loading';\r\nimport FriendRequestItem from \"./FriendRequestItem\";\r\nimport { UserPlus } from \"react-feather\";\r\n\r\nexport default class FriendRequests extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      frButtonClicked : false,\r\n      friendRequests : [],\r\n      isLoading : false\r\n    };\r\n  }\r\n  async getFriendRequests(){\r\n    this.setState({\r\n      frButtonClicked : !this.state.frButtonClicked\r\n    }, async ()=>{\r\n      if (this.state.frButtonClicked) {\r\n        this.setState({\r\n          isloading : true\r\n        })\r\n        const _requests = await FriendRequest.fetchList({recipient : User.currentUser()._id}, {decrypt : true});     \r\n        this.setState({\r\n          isloading : false\r\n        })\r\n        // const invitation = await GroupInvitation.findById(requests[requests.length-1].attrs.invitationId);\r\n        // await invitation.activate();\r\n        // const group = await UserGroup.find(requests[requests.length-1].attrs.userGroupId);\r\n        // console.log(group)\r\n        this.setState({\r\n          friendRequests : _requests          \r\n        })\r\n         \r\n      }\r\n    })\r\n   \r\n\r\n  }\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n      <button className=\"nav-link btn\" onClick={this.getFriendRequests.bind(this)} data-toggle=\"tooltip\" title=\"Check friend requests\">\r\n        <UserPlus/>\r\n      </button>\r\n      {this.state.frButtonClicked && (\r\n      <div className=\"fr-dropdown\">  \r\n        {this.state.isloading ? \r\n        <ReactLoading type={'spinningBubbles'} color={'salmon'} height={100} width={100} />\r\n        :\r\n        (this.state.friendRequests.length === 0 ?\r\n      <div>Aw it's okay little boo if noone wanna see your nud</div>\r\n       :\r\n       <ul className=\"list-group friend-request-list\">\r\n       {this.state.friendRequests.map(fr => {\r\n         return (\r\n           <FriendRequestItem fr = {fr}/>\r\n         );\r\n       })}\r\n      </ul>)}</div>)\r\n      }\r\n     </React.Fragment>\r\n    )\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport FriendSearch from \"./FriendSearch\";\r\nimport FriendRequests from \"./FriendRequests\";\r\nimport {\r\n  Menu,\r\n  LogOut,\r\n  RefreshCcw,\r\n  MessageSquare,\r\n  Search,\r\n  Edit,\r\n  ArrowLeft\r\n} from \"react-feather\";\r\nimport PersonTop from \"../Person/PersonTop\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\n\r\nexport default class Nav extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchOpened: false\r\n    };\r\n  }\r\n  openSearch() {\r\n    this.setState({\r\n      searchOpened: true\r\n    });\r\n  }\r\n  closeSearch() {\r\n    this.setState({\r\n      searchOpened: false\r\n    });\r\n  }\r\n  render() {\r\n    const { handleSignOut, userSession } = this.props;\r\n    const { person } = this.state;\r\n    return (\r\n      <nav className=\"navbar p-3 navbar-expand-md bg-light \">\r\n        {userSession.isUserSignedIn() ? \r\n        <PersonTop username={userSession.loadUserData().username}/>\r\n        :\r\n        <div>\r\n           <Link\r\n            className=\"btn btn-outline-dark\"\r\n            id=\"signin-button\"\r\n            to=\"/signin\"\r\n          >\r\n            Get Naked with Blockstack\r\n          </Link>\r\n        </div>\r\n        }\r\n        <Link to=\"/\" className=\"navbar-brand d-md-none d-inline\">\r\n          <img src=\"/favicon.ico\" />\r\n        </Link>\r\n\r\n        <button\r\n          className=\"navbar-toggler ml-1\"\r\n          type=\"button\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#collapsingNavbar2\"\r\n        >\r\n          <Menu color=\"#252631\" />\r\n        </button>\r\n\r\n        <div\r\n          className=\"navbar-collapse collapse \r\n           w-100\"\r\n          id=\"collapsingNavbar2\"\r\n        >\r\n          <ul className=\"nav navbar-nav col-md-5 d-flex justify-content-end align-items-center\">\r\n            <li className=\"nav-item my-auto\">\r\n              <Link\r\n                className=\"nav-link navbar-brand mx-0 d-none d-md-inline\"\r\n                to=\"/\"\r\n              >\r\n                Nuddle\r\n              </Link>\r\n            </li>\r\n          </ul>\r\n          {userSession.isUserSignedIn() && <ul className=\"nav navbar-nav col-md-7  flex-nowrap\">\r\n            <div className=\"d-flex col justify-content-end\">\r\n            <li>\r\n                  {this.state.searchOpened ? (\r\n                    <FriendSearch closeSearch={this.closeSearch.bind(this)} />\r\n                  ) : (\r\n                    <div\r\n                      className=\"nav-link\"\r\n                      onMouseEnter={this.openSearch.bind(this)}\r\n                    >\r\n                      <Search />\r\n                    </div>\r\n                  )}\r\n                </li>\r\n                <li\r\n                  className=\"nav-item\"\r\n                  data-toggle=\"tooltip\"\r\n                  title=\"Friend Requests\"\r\n                >\r\n                  <FriendRequests/>\r\n                </li>\r\n              \r\n              </div>\r\n\r\n            <div className=\"d-flex col-md-6 justify-content-between align-items-center\">\r\n              <div className=\"d-flex\">\r\n              <li className=\"nav-item\">\r\n                <Link\r\n                  className=\"nav-link\"\r\n                  to=\"/chat\"\r\n                  data-toggle=\"tooltip\"\r\n                  title=\"Chat\"\r\n                >\r\n                  <MessageSquare />\r\n                </Link>\r\n              </li>\r\n              <li\r\n                className=\"nav-item\"\r\n                data-toggle=\"tooltip\"\r\n                title=\"Refresh feed\"\r\n              >\r\n                <Link to=\"/\" className=\"nav-link\">\r\n                  <RefreshCcw />\r\n                </Link>\r\n              </li>\r\n              <li className=\"nav-item\" data-toggle=\"tooltip\" title=\"Log Out\">\r\n                <a className=\"nav-link\" onClick={this.props.handleSignOut}>\r\n                  <LogOut />\r\n                </a>\r\n              </li>\r\n            \r\n               </div>\r\n            </div>\r\n          </ul>\r\n        }\r\n        </div>\r\n      </nav>\r\n\r\n      //   <nav className=\"navbar navbar-dark navbar-static-top\">\r\n      //   <a className=\"navbar-brand\" href=\"https://nuddle.me\">\r\n      //     <img src={defaultProfile} alt=\"nuddle logo\" width=\"100px\"/>\r\n      //   </a>\r\n      //   <button\r\n      //       className=\"navbar-toggler\"\r\n      //       type=\"button\"\r\n      //       data-toggle=\"collapse\"\r\n      //       data-target=\"#navbarNavAltMarkup\"\r\n      //       aria-controls=\"navbarNavAltMarkup\"\r\n      //       aria-expanded=\"false\"\r\n      //       aria-label=\"Toggle navigation\"\r\n      //     >\r\n      //       <span className=\"navbar-toggler-icon\"></span>\r\n      //     </button>\r\n      //   <FriendSearch/>\r\n      //   <FriendRequests/>\r\n      //   <div className=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\">\r\n      //     <div className=\"navbar-nav ml-auto\">\r\n      //     {/* {userSession.isUserSignedIn() && ( */}\r\n      //           <Link\r\n      //             to={\"/profile\"}\r\n      //             className=\"nav-item\"\r\n      //           >\r\n      //             Profile\r\n      //           </Link>\r\n      //         {/* )} */}\r\n      //     </div>\r\n      //   </div>\r\n      // </nav>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Modal from 'react-modal';\r\nimport FriendList from \"./FriendList\";\r\nModal.setAppElement('body')\r\n\r\nconst customStyles = {\r\n  content : {\r\n    top                   : '50%',\r\n    left                  : '50%',\r\n    right                 : 'auto',\r\n    bottom                : 'auto',\r\n    marginRight           : '-50%',\r\n    transform             : 'translate(-50%, -50%)',\r\n    width : '500px'\r\n  }\r\n};\r\n\r\nexport default class NewChat extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  } \r\n  render() {\r\n    return (\r\n      <Modal\r\n        isOpen={this.props.modalIsOpen}\r\n        onRequestClose={this.props.closeModal}\r\n        style={customStyles}\r\n        contentLabel=\"New Chat\"\r\n      >\r\n        <FriendList/>\r\n     </Modal>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { User, UserGroup } from \"radiks\";\r\nimport NewChat from \"./NewChat\"\r\nimport ChatListItem from \"./ChatListItem\"\r\nimport { Edit3 } from \"react-feather\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\nexport default class ChatList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      newChatModalIsOpen : false,\r\n      groups: []\r\n    };\r\n  }\r\n  componentDidMount(){\r\n    this.getMyChats()\r\n  }\r\n  async getMyChats(){\r\n    const groups = await UserGroup.myGroups();\r\n    let finalGroups = [];\r\n    for(let group of groups){\r\n      if (group.attrs.members.length === 2){\r\n        finalGroups.push(group);\r\n      }\r\n    }\r\n    this.setState({\r\n      groups : finalGroups\r\n    })\r\n  }\r\n  openNewChatModal() {\r\n    this.setState({\r\n      newChatModalIsOpen: true\r\n    });\r\n  }\r\n  closeNewChatModal() {\r\n    this.setState({\r\n      newChatModalIsOpen: false\r\n    });\r\n  }\r\n \r\n  render() {\r\n    return (\r\n      <div className=\"chat-list-wrapper\">\r\n        <div>\r\n          <h1>Chats</h1>\r\n          {/* <div className=\"chat-header\">\r\n          <p>Chats</p>\r\n          <button className=\"btn btn-light\" data-toggle=\"tooltip\" title=\"New chat\"\r\n          onClick={this.openNewChatModal.bind(this)}><Edit3/></button>\r\n          </div>\r\n          <NewChat  modalIsOpen={this.state.newChatModalIsOpen}\r\n          closeModal={this.closeNewChatModal.bind(this)}/> */}\r\n        </div>\r\n        <div className=\"chat-list\">\r\n          {this.state.groups.length === 0 ? \r\n          \"You don't have any saucy convo yet. Initite some\" :\r\n          this.state.groups.map(group => {\r\n            return (\r\n              <ChatListItem group={group}\r\n              selectChat = {this.props.selectChat}/>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { Model, UserGroup, User } from \"radiks\";\r\n\r\nexport default class Message extends Model {\r\n  static className = \"Message\";\r\n  static schema = {\r\n    sender : {\r\n      type: String,\r\n      required : true\r\n    },\r\n    content: {\r\n      type: String,\r\n      // required : true\r\n    },\r\n    byte: {\r\n      type: ArrayBuffer,\r\n      // required : true\r\n    },\r\n    type: {\r\n      type: String, //text, 'image','video','expirable-image'\r\n      required : true\r\n    },\r\n    duration : {\r\n      type : Number //seconds\r\n    },\r\n    userGroupId: {\r\n      type: String,\r\n      decrypted: true,\r\n      required : true\r\n    }\r\n\r\n  };\r\n  static defaults = {\r\n  }\r\n  static async sendTextMsg(txt , userGroupId){\r\n    const msg = new Message({\r\n      sender : User.currentUser()._id,\r\n      content : txt,\r\n      type : 'text',\r\n      userGroupId : userGroupId\r\n    })\r\n    await msg.save()\r\n    return msg;\r\n  }\r\n\r\n  static async sendPhotoMsg(binary , userGroupId){\r\n    const msg = new Message({\r\n      sender : User.currentUser()._id,\r\n      byte : binary,\r\n      type : 'photo',\r\n      userGroupId : userGroupId\r\n    })\r\n    await msg.save()\r\n    return msg;\r\n  }\r\n\r\n  static async sendExpirablePhotoMsg(binary, duration, userGroupId){\r\n    const msg = new Message({\r\n      content : binary,\r\n      type : 'expirable-photo',\r\n      duration: duration,\r\n      userGroupId : userGroupId\r\n    })\r\n    await msg.save()\r\n  }\r\n}\r\n// export default class PrivateGroupMessage extends UserGroup {\r\n//   static schema = {\r\n//     ...UserGroup.schema,\r\n//     description: {\r\n//       type: String\r\n//     },\r\n// };\r\n// }","import React, { Component } from \"react\";\r\nimport { Smile } from \"react-feather\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport { Camera } from \"react-feather\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CameraModal from \"../Camera/CameraModal\";\r\nimport Message from \"../models/Message\"\r\nimport Photo from \"../Shared/photo\";\r\n\r\n\r\nconst TEXT_LIMIT = 1000;\r\n\r\nexport default class MessageInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      newComment: \"\",\r\n      characters: TEXT_LIMIT,\r\n      showEmojiPicker: false,\r\n      cameraModalIsOpen: false\r\n    };\r\n  }\r\n  componentDidMount(){\r\n  }\r\n  addEmoji(emoji) {\r\n    this.setState({\r\n      newComment: this.state.newComment + emoji.native,\r\n      characters: this.state.characters + 1\r\n    });\r\n  }\r\n  /**\r\n   * not being used\r\n   * @param {*} event \r\n   */\r\n  setNewComment(event) {\r\n    if (this.state.characters < TEXT_LIMIT) {\r\n      this.setState({\r\n        newComment: event.target.value,\r\n        characters: event.target.value.length\r\n      });\r\n      if (event.target.value.length >= TEXT_LIMIT) {\r\n      }\r\n    }\r\n  }\r\n  async sendMessage(event){\r\n    if(event.key === \"Enter\"){\r\n      event.preventDefault()\r\n      try {\r\n        const newMessage = await Message.sendTextMsg(this.state.newComment, this.props.chatRoomId)\r\n        await this.props.sendMessage(newMessage)\r\n        await this.setState({\r\n          newComment : '',\r\n          characters: TEXT_LIMIT\r\n        })\r\n      } catch(e){\r\n\r\n      }\r\n    }\r\n  }\r\n  async sendPhoto(b64Data, chatRoomId){\r\n    const {userSession} = this.props;\r\n\r\n    const byteArray = Photo.b64tobinary(b64Data)\r\n    try {\r\n      const newMessage = await Message.sendPhotoMsg(byteArray, chatRoomId)\r\n      await this.props.sendMessage(newMessage)\r\n    } catch(e){\r\n\r\n    }\r\n  }\r\n  \r\n  handleChange(event) {\r\n    var appropriateLengthWords = event.target.value.substring(\r\n      0,\r\n      TEXT_LIMIT - 1\r\n    );\r\n    this.setState({\r\n      newComment: appropriateLengthWords,\r\n      characters: TEXT_LIMIT - event.target.value.length\r\n    });\r\n  }\r\n  toggleEmojiPicker() {\r\n    this.setState({\r\n      showEmojiPicker: !this.state.showEmojiPicker\r\n    });\r\n  }\r\n  openCameraModal() {\r\n    this.setState({\r\n      cameraModalIsOpen: true\r\n    });\r\n  }\r\n  closeCameraModal() {\r\n    this.setState({\r\n      cameraModalIsOpen: false\r\n    });\r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div className=\"input-wrapper\">\r\n        <div>\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              display: \"flex\",\r\n              flexDirection: \" column \"\r\n            }}\r\n          >\r\n            <textarea\r\n              id=\"commentInput\"\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Drop a thought...\"\r\n              value={this.state.newComment}\r\n              onChange={this.handleChange.bind(this)}\r\n              onKeyDown={event => this.sendMessage(event)}\r\n            />\r\n            <div style={{ alignSelf: \"flex-end\" }}>\r\n              <small>\r\n                {this.state.characters}/{TEXT_LIMIT}\r\n              </small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"emoji-div\"\r\n          style={{ alignSelf: \"flex-start\", position: \"relative\" }}\r\n        >\r\n          <button\r\n            type=\"button \"\r\n            className=\"btn btn-emoji\"\r\n            data-toggle=\"tooltip\"\r\n            title=\"Insert an emoji\"\r\n            onClick={this.toggleEmojiPicker.bind(this)}\r\n            style={{ paddingTop: \"5px\" }}\r\n          >\r\n            <Smile size={\"24\"} />\r\n          </button>\r\n          <button\r\n            className=\"btn btn-emoji\"\r\n            onClick={this.openCameraModal.bind(this)}\r\n          >\r\n            <Camera size=\"24\" />\r\n          </button>\r\n          {this.state.showEmojiPicker && (\r\n            <Picker set=\"emojione\" onSelect={this.addEmoji.bind(this)} />\r\n          )}\r\n        </div>\r\n        <CameraModal\r\n          userSession={this.props.userSession}\r\n          modalIsOpen={this.state.cameraModalIsOpen}\r\n          closeModal={this.closeCameraModal.bind(this)}\r\n          sendPhoto={this.sendPhoto.bind(this)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport TimeStamp from \"../Shared/timestamp\";\r\nimport { UserSession } from \"blockstack\";\r\nimport Photo from \"../Shared/photo\";\r\nimport { User } from \"radiks/lib\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\n\r\nexport default class MessageItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n  componentDidMount(){\r\n  }\r\n  isMyMsg(username){\r\n    if (username === User.currentUser()._id){\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const {msg} = this.props;\r\n    return (\r\n      <div className=\"msg-item-wrapper\">\r\n      <div className={\"msg-item \"+(this.isMyMsg(msg.attrs.sender) ? \"my-msg\":\"\")}>\r\n        <div style={{ padding: \"0px 10px\" }}>\r\n          <div\r\n            className=\"photos\"\r\n            style={{\r\n              backgroundImage: `url(${defaultProfile})`,\r\n              backgroundPosition: \"center\",\r\n              backgroundSize: \"cover\",\r\n              backgroundRepeat: \"no-repeat\"\r\n            }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <i>{msg.attrs.sender}</i>\r\n          <div className=\"msg-body\">\r\n            {msg.attrs.type==='text' && \r\n          <div>{msg.attrs.content}</div>}\r\n                      {msg.attrs.type==='photo' && \r\n          <img src={Photo.toBlob(this.props.msg.attrs.byte)} width=\"200px\"/>}\r\n          <small className=\"timestamp\">{TimeStamp.convertDate(msg.attrs.createdAt)}</small>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>            \r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport ChatList from \"./ChatList\";\r\nimport MessageInput from \"./MessageInput\";\r\nimport MessageItem from \"./MessageItem\";\r\nimport { withRouter } from \"react-router\";\r\nimport Message from \"../models/Message\";\r\nimport ReactLoading from 'react-loading';\r\n\r\nclass ChatRoom extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      messageList: [],\r\n      img: \"\",\r\n      isLoading: false\r\n    };\r\n    const messageCallBack = message => {\r\n      if (\r\n        message.attrs.userGroupId === this.props.match.params.chatRoomId\r\n      ) {\r\n        this.fetchMessages();\r\n      }\r\n    };\r\n    Message.addStreamListener(messageCallBack.bind(this));\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.match.params.chatRoomId) {\r\n      this.fetchMessages();\r\n    }\r\n  }\r\n  startLoading(){\r\n    this.setState({\r\n      isLoading: true\r\n    })\r\n  }\r\n  endLoading(){\r\n    this.setState({\r\n      isLoading: false\r\n    })\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      prevProps.match.params.chatRoomId !==\r\n        this.props.match.params.chatRoomId &&\r\n      this.props.match.params.chatRoomId\r\n    ) {\r\n      this.startLoading()\r\n      this.fetchMessages().finally(()=>this.endLoading());\r\n    }\r\n  }\r\n  async fetchMessages() {\r\n    const messages = await Message.fetchList({\r\n      userGroupId: this.props.match.params.chatRoomId\r\n    });\r\n    // for(let msg of messages) {\r\n    //   await msg.destroy()\r\n    // }\r\n    this.setState({\r\n      messageList: messages\r\n    });\r\n  }\r\n\r\n  sendMessage(newMessage) {\r\n    let _messages = this.state.messageList;\r\n    _messages.push(newMessage);\r\n    this.setState({\r\n      messageList: _messages\r\n    });\r\n  }\r\n \r\n  render() {\r\n    return (\r\n      <div className=\"chat-room-wrapper\">\r\n        <div className=\"chat-room\">\r\n          {!this.props.match.params.chatRoomId ? (\r\n            <div>Select a friend to nuddle</div>\r\n          ) : this.state.isLoading ? (\r\n            <ReactLoading\r\n              type={\"spinningBubbles\"}\r\n              color={\"salmon\"}\r\n              height={100}\r\n              width={100}\r\n            />\r\n          ) : this.state.messageList.length === 0 ? (\r\n            <i>\r\n              You don't have any message with this nudist. Spice it up now ;)\r\n            </i>\r\n          ) : (\r\n            this.state.messageList.map(msg => {\r\n              return <MessageItem msg={msg} \r\n              userSession = {this.props.userSession}/>;\r\n            })\r\n          )\r\n          }\r\n        </div>\r\n\r\n        <MessageInput\r\n          userSession={this.props.userSession}\r\n          sendMessage={this.sendMessage.bind(this)}\r\n          // postPhoto={this.postPhoto.bind(this)}\r\n          chatRoomId={this.props.match.params.chatRoomId}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ChatRoom);\r\n","import React, { Component } from \"react\";\r\nimport ChatList from \"./ChatList\";\r\nimport ChatRoom from \"./ChatRoom\";\r\n\r\nexport default class Chat extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedFriend: null\r\n    };\r\n  }\r\n  selectChat(selectedFriend){\r\n    this.setState({\r\n      selectedFriend : selectedFriend\r\n    })\r\n  }\r\n  componentDidMount(){\r\n  }\r\n  render(){\r\n    return(\r\n      <div className=\"chat-wrapper\">\r\n        <ChatList selectChat={this.selectChat.bind(this)}/>\r\n        <ChatRoom \r\n        userSession={this.props.userSession}\r\n        selectedFriend={this.state.selectedFriend} />\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport Post from '../models/Post';\r\nimport PersonTop from '../Person/PersonTop';\r\n\r\nexport default class SinglePost extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n\r\n  \tthis.state = {\r\n      post : {\r\n        attrs : {\r\n          username : 'Nudist',\r\n          base64 : ''\r\n        }\r\n      }\r\n  \t};\r\n  }\r\n  componentDidMount(){\r\n    const id = this.props.match.params.postId;\r\n    if (id) {\r\n      this.getPost();\r\n    } else {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n  async getPost(){\r\n    const id = this.props.match.params.postId;\r\n    const post = await Post.findOne({_id : id},{decrypt : false});\r\n    if(post) {\r\n      this.setState({\r\n        post : post\r\n      })\r\n    } else {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n  render() {\r\n    const {post} = this.state;\r\n    return (\r\n      <div className=\"single-post-wrapper\">\r\n        <div>\r\n        <img src={post.attrs.base64}/>\r\n        <p>{post.attrs.caption}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport { UserSession, AppConfig, config } from \"blockstack\";\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\nimport { User, configure, getConfig } from \"radiks\";\r\n\r\nimport Home from \"./Home/Home.jsx\";\r\nimport Profile from \"./Profile/Profile.jsx\";\r\nimport Signin from \"./Nav/Signin.jsx\";\r\nimport Nav from \"./Nav/Nav.jsx\";\r\nimport Chat from \"./Chat/Chat.jsx\";\r\nimport CameraModal from \"./Camera/CameraModal.jsx\";\r\nimport SinglePost from \"./Post/SinglePost.jsx\";\r\n\r\nconst appConfig = new AppConfig([\"store_write\", \"publish_data\"]);\r\nconst userSession = new UserSession({ appConfig: appConfig });\r\n// const apiServer = 'https://nuddle-server.herokuapp.com';\r\n\r\nconst apiServer =\r\n  process.env.NODE_ENV === \"development\"\r\n    ? \"http://localhost:5000\"\r\n    : \"https://nuddle-server.herokuapp.com\";\r\nconfigure({\r\n  apiServer: apiServer,\r\n  userSession\r\n});\r\nconfig.logLevel = \"none\";\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      userSession\r\n    };\r\n  }\r\n\r\n  handleSignIn(e) {\r\n    e.preventDefault();\r\n    userSession.redirectToSignIn();\r\n  }\r\n\r\n  handleSignOut(e) {\r\n    e.preventDefault();\r\n    userSession.signUserOut(window.location.origin);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"site-wrapper\">\r\n        {!userSession.isUserSignedIn() ? (\r\n          <React.Fragment>\r\n            <Nav\r\n              userSession={userSession}\r\n              handleSignOut={this.handleSignOut.bind(this)}\r\n            />\r\n            <div className=\"inner-wrapper\">\r\n              <Switch>\r\n                <Route\r\n                  exact\r\n                  path=\"/\"\r\n                  exact={true}\r\n                  render={props => (\r\n                    <Home\r\n                      {...props}\r\n                      userSession={userSession}\r\n                      handleSignIn={this.handleSignIn}\r\n                    />\r\n                  )}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/p/:postId`}\r\n                  exact={true}\r\n                  render={props => <SinglePost {...props} />}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/signin`}\r\n                  exact={true}\r\n                  render={props => (\r\n                    <Signin\r\n                      {...props}\r\n                      userSession={userSession}\r\n                      handleSignIn={this.handleSignIn}\r\n                    />\r\n                  )}\r\n                />\r\n                <Redirect to=\"/\" />\r\n              </Switch>\r\n            </div>\r\n          </React.Fragment>\r\n        ) : (\r\n          <React.Fragment>\r\n            <Nav\r\n              userSession={userSession}\r\n              handleSignOut={this.handleSignOut.bind(this)}\r\n            />\r\n            <div className=\"inner-wrapper\">\r\n              <Switch>\r\n                <Route\r\n                  exact\r\n                  path=\"/\"\r\n                  exact={true}\r\n                  render={props => (\r\n                    <Home\r\n                      {...props}\r\n                      userSession={userSession}\r\n                      handleSignIn={this.handleSignIn}\r\n                    />\r\n                  )}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/profile`}\r\n                  exact={true}\r\n                  render={props => (\r\n                    <Profile\r\n                      {...props}\r\n                      userSession={userSession}\r\n                      handleSignOut={this.handleSignOut.bind(this)}\r\n                    />\r\n                  )}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/chat`}\r\n                  exact={true}\r\n                  render={props => (\r\n                    <Chat {...props} userSession={userSession} />\r\n                  )}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/chat/:chatRoomId`}\r\n                  exact={true}\r\n                  render={props => (\r\n                    <Chat {...props} userSession={userSession} />\r\n                  )}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/camera`}\r\n                  exact={true}\r\n                  render={props => <CameraModal {...props} />}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/p/:postId`}\r\n                  exact={true}\r\n                  render={props => <SinglePost {...props} />}\r\n                />\r\n                <Redirect to=\"/\" />\r\n              </Switch>\r\n            </div>\r\n          </React.Fragment>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (userSession.isSignInPending()) {\r\n      userSession.handlePendingSignIn().then(async userData => {\r\n        window.history.replaceState({}, document.title, \"/\");\r\n        this.setState({ userData: userData });\r\n        await User.createWithCurrentUser();\r\n      });\r\n    }\r\n    // else if(userSession.isUserSignedIn()) {\r\n\r\n    // }\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport App from './App.jsx';\r\n\r\n// Require Sass file so webpack can build it\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport'./styles/style.scss';\r\n\r\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}