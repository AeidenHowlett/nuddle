{"version":3,"sources":["../node_modules/jsdom/lib/jsdom sync","../node_modules/parse5/lib sync","models/FriendRequest.js","models/BlockstackUser.js","Shared/photo.js","Person/PersonTop.jsx","Chat/ChatListItem.jsx","Chat/FriendList.jsx","models/Post.js","Post/NewPost.jsx","Camera/CameraTools.jsx","Camera/CameraModal.jsx","Home/PostCard.jsx","Home/PostWrapper.jsx","Home/HomeFeed.jsx","Home/Home.jsx","Profile/Profile.jsx","Nav/Signin.jsx","Nav/FriendSearch.jsx","Shared/timestamp.js","Nav/FriendRequestItem.jsx","Nav/FriendRequests.jsx","Nav/Nav.jsx","Chat/NewChat.jsx","Chat/ChatList.jsx","models/Message.js","Chat/MessageInput.jsx","Chat/MessageItem.jsx","Chat/ChatRoom.jsx","Chat/Chat.jsx","Post/SinglePost.jsx","App.jsx","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","FriendRequest","Model","className","schema","sender","type","String","decrypted","required","recipient","userGroupId","BlockstackUser","User","friends","Array","Photo","b64Data","byteCharacters","atob","byteNumbers","length","i","charCodeAt","Uint8Array","dataURI","byteString","split","mimeString","ab","ArrayBuffer","ia","blob","Blob","URL","createObjectURL","byteData","PersonTop","props","state","person","name","avatarUrl","profilelUrl","this","getProfile","prevProps","username","lookupProfile","then","profile","setState","Person","getProfilePic","catch","error","userSession","fetch","method","mode","response","url","style","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","Component","ChatListItem","friendName","friendAvatar","getGroupHead","group","attrs","members","currentUser","_id","Link","to","FriendList","groups","getMyChats","userGroup","myGroups","finalGroups","push","findOne","sendPhoto","Fragment","map","selectChat","onClick","bind","Post","caption","blobId","post","address","save","byteArray","base64","defaults","uuidv4","require","NewPost","img","putFile","JSON","stringify","encrypt","createPost","finally","closeModal","history","event","target","value","placeholder","onChange","handleChange","data-toggle","title","color","withRouter","CameraTools","background","hex","setPenColor","handleChangeComplete","Modal","setAppElement","customStyles","content","top","left","right","bottom","marginRight","transform","margin","padding","cameraReady","minWidth","height","videoConstraints","width","facingMode","CameraModal","cam","React","createRef","_sketch","isTakingPicture","showSendOption","penColor","text","$","window","_img","current","getScreenshot","_onBackgroundImageDrop","chatRoomId","toDataURL","setBackgroundFromDataUrl","stretched","stretchedX","stretchedY","originX","originY","addText","resetPicture","isOpen","modalIsOpen","onRequestClose","contentLabel","ref","mirrored","onUserMedia","takePicture","tool","Tools","Pencil","lineColor","lineWidth","_addText","readyToSend","PostCard","getImgFromGaia","getFile","decrypt","parse","heights","Math","floor","random","goToImg","position","src","alt","randomHeight","Feed","posts","isLoading","feed","paddingTop","HomeFeed","fetchPosts","cameraModalIsOpen","fetchList","sort","changeFeed","hidden","class","Home","onHide","size","isUserSignedIn","openCameraModal","closeCameraModal","Profile","handleSignOut","isSignInPending","align","loadUserData","Signin","handleSignIn","FriendSearch","input","searchedUsers","getMyFriends","trim","$regex","_searchedUsers","fr","UserGroup","create","groupMembership","GroupMembership","signingKeyPrivateKey","privateKey","signingKeyId","makeGroupMembership","memberShip","request","invitationId","_friends","me","update","includes","onChangeHandler","user","isFriend","isMe","addFriend","TimeStamp","posted","postedTime","Date","timeDiff","timeString","secDiff","toString","minDiff","hourDiff","dayDiff","toLocaleDateString","year","month","day","FriendRequestItem","description","groupInvitation","findById","invitation","activate","acceptFR","convertDate","createdAt","toLowerCase","FriendRequests","frButtonClicked","friendRequests","a","async","isloading","_requests","getFriendRequests","Nav","searchOpened","data-target","closeSearch","onMouseEnter","openSearch","ChatList","newChatModalIsOpen","Message","txt","msg","binary","byte","duration","Number","MessageInput","newComment","characters","showEmojiPicker","emoji","native","key","preventDefault","sendTextMsg","newMessage","sendMessage","b64tobinary","sendPhotoMsg","appropriateLengthWords","substring","TEXT_LIMIT","display","flexDirection","onKeyDown","alignSelf","toggleEmojiPicker","set","onSelect","addEmoji","MessageItem","isMyMsg","toBlob","ChatRoom","messageList","addStreamListener","message","match","params","fetchMessages","startLoading","endLoading","messages","_messages","Chat","selectedFriend","SinglePost","postId","getPost","appConfig","AppConfig","UserSession","configure","apiServer","config","logLevel","App","redirectToSignIn","signUserOut","location","origin","Switch","Route","exact","path","Redirect","handlePendingSignIn","userData","replaceState","document","createWithCurrentUser","ReactDOM","render","BrowserRouter","getElementById"],"mappings":"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","file":"static/js/main.12312e7c.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1217;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1248;","import { Model } from 'radiks';\r\n\r\nexport default class FriendRequest extends Model {\r\n    static className = 'FriendRequest';\r\n    static schema = {\r\n      sender: { type: String, decrypted : true, required : true }, \r\n      recipient: {type: String, decrypted : true,  required : true },\r\n      userGroupId : {type: String, decrypted : true,  required : true }\r\n    };\r\n}\r\n","import { User } from 'radiks';\r\n\r\n// For example I want to add a public name on my user model\r\nexport default class BlockstackUser extends User {\r\n  static schema = {\r\n    ...User.schema,\r\n    friends: {\r\n      type: Array,\r\n      // decrypted: true,\r\n    },\r\n  };\r\n}","export default class Photo {\r\n  static b64tobinary(b64Data) {\r\n    const byteCharacters = atob(b64Data);\r\n    const byteNumbers = new Array(byteCharacters.length);\r\n    for (let i = 0; i < byteCharacters.length; i++) {\r\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n    }\r\n    return new Uint8Array(byteNumbers);\r\n  }\r\n  static dataURItoBlob(dataURI) {\r\n    // convert base64 to raw binary data held in a string\r\n    // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\r\n    var byteString = atob(dataURI.split(',')[1]);\r\n  \r\n    // separate out the mime component\r\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\r\n  \r\n    // write the bytes of the string to an ArrayBuffer\r\n    var ab = new ArrayBuffer(byteString.length);\r\n  \r\n    // create a view into the buffer\r\n    var ia = new Uint8Array(ab);\r\n  \r\n    // set the bytes of the buffer to the correct values\r\n    for (var i = 0; i < byteString.length; i++) {\r\n        ia[i] = byteString.charCodeAt(i);\r\n    }\r\n  \r\n    // write the ArrayBuffer to a blob, and you're done\r\n    var blob = new Blob([ab], {type: mimeString});\r\n    return URL.createObjectURL(blob);\r\n\r\n    // return blob;\r\n  \r\n  }\r\n  static toBlob(byteData){\r\n    const blob = new Blob([byteData], {type: 'image/jpg'});\r\n    return URL.createObjectURL(blob);\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport { User } from 'radiks';\r\nimport { Person, lookupProfile, UserSession, getFile } from 'blockstack';\r\nimport BlockstackUser from '../models/BlockstackUser';\r\nimport Photo from '../Shared/photo';\r\nconst defaultProfile = '/images/logo.jpg';\r\n\r\nexport default class PersonTop extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      person: {\r\n        name() {\r\n          return 'Nudist';\r\n        },\r\n        avatarUrl() {\r\n          return defaultProfile;\r\n        }\r\n      },\r\n      profilelUrl: ''\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getProfile();\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.username !== this.props.username) {\r\n      this.getProfile();\r\n    }\r\n  }\r\n  getProfile() {\r\n    const { username } = this.props;\r\n    lookupProfile(username)\r\n      .then(profile => {\r\n        this.setState({\r\n          person: new Person(profile)\r\n        }, () => this.getProfilePic());\r\n      })\r\n      .catch(error => {});\r\n  }\r\n  async getProfilePic(){\r\n    const {person} = this.state;\r\n    const {userSession} = this.props;\r\n    // const profileUrl =await getFile('1PcWxogPMAg99ay4iuKE4aDdhpKwfXTvJs//avatar-0')\r\n    // const url = Photo.toBlob(profileUrl);\r\n    // this.setState({\r\n    //   profileUrl : url\r\n    // })\r\n    fetch(person.avatarUrl(),  {method: \"GET\", mode: 'cors'})\r\n    .then((response) => {\r\n      response.blob()\r\n      .then((blob) => URL.createObjectURL(blob))\r\n      .then((url) => {\r\n        this.setState({\r\n          profilelUrl : url\r\n        })\r\n      })\r\n    })\r\n  }\r\n  render() {\r\n    const { person } = this.state;\r\n    const { username } = this.props;\r\n\r\n    return (\r\n      <div className='person-top'>\r\n        <div\r\n          className='photos'\r\n          style={{\r\n            backgroundImage: `url(${\r\n              this.state.profilelUrl ? this.state.profilelUrl : defaultProfile\r\n            })`,\r\n            backgroundPosition: 'center',\r\n            backgroundSize: 'cover',\r\n            backgroundRepeat: 'no-repeat'\r\n          }}\r\n        />\r\n        {/* <img src={this.state.profilelUrl}/> */}\r\n        <div>\r\n          <div className='person-top-name text-truncate'>{person.name()}</div>\r\n          <div className='person-top-username'>{username}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { User, UserGroup } from \"radiks\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PersonTop from \"../Person/PersonTop\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\nexport default class ChatListItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      friendName: \"Nudist\",\r\n      friendAvatar: defaultProfile\r\n    };\r\n  }\r\n  componentDidMount(){\r\n    this.getGroupHead()\r\n\r\n  }\r\n\r\n  componentDidUpdate(prevProps){\r\n    if (prevProps.group !== this.props.group){\r\n      this.getGroupHead()\r\n    }\r\n  }\r\n\r\n  getGroupHead(){\r\n    const { group } = this.props;\r\n\r\n    if (group && group.attrs.members[0].username === User.currentUser()._id) {\r\n      this.setState({\r\n        friendName : group.attrs.members[1].username\r\n      })\r\n    } else if (group){\r\n      this.setState({\r\n        friendName : group.attrs.members[0].username\r\n      })\r\n    }\r\n  }\r\n  render() {\r\n    const { group } = this.props;\r\n    return (\r\n      <Link to={`/chat/${group.attrs._id}`}>\r\n        <div className=\"friend-item\">\r\n          <PersonTop username = {this.state.friendName}/>\r\n        </div>\r\n      </Link>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { User } from \"radiks\";\r\nimport { Person, lookupProfile } from \"blockstack\";\r\nimport BlockstackUser from \"../models/BlockstackUser\";\r\nimport PersonTop from \"../Person/PersonTop\";\r\nimport ChatListItem from \"./ChatListItem\";\r\nimport userGroup from \"radiks/lib/models/user-group\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\n\r\nexport default class FriendList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      groups: []\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getMyChats();\r\n  }\r\n  async getMyChats() {\r\n    const groups = await userGroup.myGroups();\r\n    let finalGroups = [];\r\n    for (let group of groups) {\r\n      if (group.attrs.members.length === 2) {\r\n        finalGroups.push(group);\r\n      }\r\n    }\r\n    this.setState({\r\n      groups: finalGroups\r\n    });\r\n  }\r\n  getFriends() {\r\n    const me = BlockstackUser.findOne({ username: User.currentUser()._id });\r\n  }\r\n\r\n  sendPhoto(group){\r\n    this.props.sendPhoto(group.attrs._id)\r\n  }\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <h1>Friend List</h1>\r\n        <div>\r\n          <ul className=\"list-group\">\r\n            {this.state.groups.map(group => {\r\n              return (\r\n                <li className=\"list-group-item friend-list\">\r\n                  {/* <PersonTop username=\"tateyeetman.id.blockstack\"/>\r\n                  <div>\r\n                    <button\r\n                      className=\"btn btn-light add-friend-butt\"\r\n                      onClick={this.props.selectFriend}\r\n                    >\r\n                      Send\r\n                    </button>\r\n                  </div> */}\r\n                  <ChatListItem\r\n                    group={group}\r\n                    selectChat={this.props.selectChat}\r\n                  />\r\n                  <button\r\n                    className=\"btn btn-light add-friend-butt\"\r\n                    onClick={this.sendPhoto.bind(this, group)}\r\n                  >\r\n                    Send\r\n                  </button>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","import { Model, User } from \"radiks\";\r\n\r\nexport default class Post extends Model {\r\n  static className = \"Post\";\r\n  static schema = {\r\n    // username : {\r\n    //   type: String,\r\n    //   decrypted : true,\r\n    //   required : true\r\n    // },\r\n    caption: {\r\n      type: String,\r\n      decrypted : true,\r\n      required : true\r\n    },\r\n    byteArray: {\r\n      type: ArrayBuffer,\r\n      // decrypted : true\r\n      // required : true\r\n    },\r\n    base64: {\r\n      type: String,\r\n      decrypted : true,\r\n      // required : true\r\n    },\r\n    address: {\r\n      type: String, //Gaia address\r\n      decrypted : true,\r\n      // required : true\r\n    }\r\n    // userGroupId: {\r\n    //   type: String,\r\n    //   decrypted: true,\r\n    //   required : true\r\n    // }\r\n\r\n  };\r\n  static defaults = {\r\n  }\r\n  static async createPost(caption, blobId){\r\n    const post = new Post({\r\n      username : User.currentUser()._id,\r\n      caption : caption,\r\n      // base64 : base64,\r\n      address : blobId\r\n    })\r\n    await post.save()\r\n    return post;\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport {\r\n  Person,\r\n} from 'blockstack';\r\nimport FriendList from '../Chat/FriendList';\r\nimport { Send } from 'react-feather';\r\nimport Post from '../models/Post';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Photo from '../Shared/photo';\r\nconst uuidv4 = require('uuid/v4');\r\n\r\n\r\nclass NewPost extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      caption : '',\r\n    }\r\n  }\r\n \r\n  async post(){\r\n    const {img, userSession} = this.props;\r\n    const blobId = uuidv4()\r\n\r\n    await userSession.putFile(`${blobId}.json`, JSON.stringify(img),{ encrypt: false })\r\n\r\n    await Post.createPost(this.state.caption, blobId).finally(()=> {\r\n      this.props.closeModal()\r\n      this.props.history.push(`/`)\r\n    });\r\n\r\n  }\r\n  handleChange(event) {\r\n    this.setState({\r\n      caption: event.target.value,\r\n    });\r\n  }\r\n  \r\n \r\n  render(){\r\n    return(\r\n      <div className=\"new-post\">\r\n        <div>\r\n        <textarea placeholder=\"write something juicy\" \r\n         value={this.state.caption}\r\n         onChange={this.handleChange.bind(this)}></textarea>\r\n        </div>\r\n        <div className=\"new-post-send-list\">\r\n          <input className=\"form-control\" placeholder=\"Send as post or Slice thru DM\"/>\r\n          <button className=\"btn btn-light bg-salmon\" onClick={this.post.bind(this)} data-toggle=\"tooltip\" title=\"Send as post\">\r\n            <Send color={'white'}/></button>\r\n        </div>\r\n        <FriendList sendPhoto={this.props.sendPhoto}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default withRouter(NewPost)","import React, { Component } from \"react\";\r\nimport { HuePicker } from \"react-color\";\r\n\r\nexport default class CameraTools extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      color : '#000'\r\n    };\r\n  }\r\n  handleChangeComplete(color) {\r\n    this.setState({ background: color.hex });\r\n    this.props.setPenColor(color.hex)\r\n  }\r\n  render() {\r\n    return (\r\n      <HuePicker\r\n        color={this.state.background}\r\n        onChange={this.handleChangeComplete.bind(this)}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Camera, XCircle, Send, Type } from \"react-feather\";\r\nimport Webcam from \"react-webcam\";\r\nimport Modal from \"react-modal\";\r\nimport NewPost from \"../Post/NewPost\";\r\nimport { SketchField, Tools } from \"react-sketch\";\r\nimport CameraTools from \"./CameraTools\";\r\nimport ReactLoading from \"react-loading\";\r\nimport $ from \"jquery\";\r\n\r\nModal.setAppElement(\"body\");\r\n\r\nconst customStyles = {\r\n  content: {\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    right: \"auto\",\r\n    bottom: \"auto\",\r\n    marginRight: \"-50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    margin: \"50px 0\",\r\n    padding : \"0\",\r\n    cameraReady: false,\r\n    minWidth : '500px',\r\n    height: 'auto',\r\n   \r\n  }\r\n};\r\nconst videoConstraints = {\r\n  width: 720,\r\n  height: 1280,\r\n  facingMode: \"user\"\r\n};\r\nexport default class CameraModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.cam = React.createRef();\r\n    this._sketch = React.createRef();\r\n    this.state = {\r\n      img: null,\r\n      isTakingPicture: true,\r\n      showSendOption: false,\r\n      penColor: \"#000\",\r\n      text: \"Click here to edit text\",\r\n      width: $(window).width(),\r\n      height: $(window).height(),\r\n    };\r\n  } //monkey monkey monkey monkey monkey monkey monkey monkey\r\n\r\n  componentDidMount(){\r\n  }\r\n  takePicture() {\r\n    const _img = this.cam.current.getScreenshot();\r\n\r\n    this.setState({ img: _img, isTakingPicture: false }, () =>\r\n      this._onBackgroundImageDrop(_img)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * send picture via chat\r\n   */\r\n  sendPhoto(chatRoomId) {\r\n    this.props.sendPhoto(this.state.img.split(\",\")[1], chatRoomId);\r\n    this.props.closeModal();\r\n  }\r\n\r\n  /**\r\n   * when user ready click show friendlist\r\n   */\r\n  readyToSend() {\r\n    const _img = this._sketch.current.toDataURL();\r\n    this.setState({\r\n      img: _img,\r\n      showSendOption: true\r\n    });\r\n  }\r\n\r\n  _onBackgroundImageDrop(img) {\r\n    let sketch = this._sketch.current;\r\n    sketch.setBackgroundFromDataUrl(img, {\r\n      stretched: true,\r\n      stretchedX: false,\r\n      stretchedY: false,\r\n      originX: \"left\",\r\n      originY: \"top\"\r\n    });\r\n  }\r\n\r\n  _addText() {\r\n    this._sketch.current.addText(this.state.text);\r\n  }\r\n\r\n  setPenColor(color) {\r\n    this.setState({\r\n      penColor: color\r\n    });\r\n  }\r\n  resetPicture() {\r\n    this.setState({ img: null, isTakingPicture: true, showSendOption: false });\r\n  }\r\n  onUserMedia() {\r\n    this.setState({\r\n      cameraReady: true\r\n    });\r\n  }\r\n  closeModal() {\r\n    this.setState({\r\n      cameraReady: false\r\n    });\r\n    this.resetPicture();\r\n    this.props.closeModal();\r\n  }\r\n  render() {\r\n    return (\r\n      <Modal\r\n        isOpen={this.props.modalIsOpen}\r\n        onRequestClose={this.closeModal.bind(this)}\r\n        style={customStyles}\r\n        contentLabel=\"Camera\"\r\n      >\r\n        <div className=\"camera-wrap\">\r\n          {!this.state.cameraReady ? (\r\n            <div className=\"loading-wrapper\" style={{width : '100%'}}>\r\n              <ReactLoading\r\n                type={\"spinningBubbles\"}\r\n                color={\"salmon\"}\r\n                height={100}\r\n                width={100}\r\n              />\r\n              Getting camera ready\r\n            </div>\r\n          ) : null}\r\n          {this.state.isTakingPicture ? (\r\n            <>\r\n              <Webcam\r\n                ref={this.cam}\r\n                mirrored={true}\r\n                onUserMedia={this.onUserMedia.bind(this)}\r\n                height={'500px'}\r\n                width={'auto'}\r\n                videoConstraints={videoConstraints}\r\n              />\r\n              <button\r\n                className=\"camera-button\"\r\n                onClick={() => {\r\n                  this.takePicture();\r\n                }}\r\n              ></button>\r\n            </>\r\n          ) : (\r\n            <React.Fragment>\r\n              <div className=\"photo-taken\">\r\n                <SketchField\r\n                  width=\"500px\"\r\n                  height=\"500px\"\r\n                  tool={Tools.Pencil}\r\n                  lineColor={this.state.penColor}\r\n                  ref={this._sketch}\r\n                  lineWidth={3}\r\n                />\r\n                <button\r\n                  className=\"btn camera-reset\"\r\n                  onClick={() => {\r\n                    this.resetPicture();\r\n                  }}\r\n                >\r\n                  <XCircle />\r\n                </button>\r\n                <button className=\"btn\" onClick={this._addText.bind(this)}>\r\n                  <Type />\r\n                </button>\r\n                <button\r\n                  className=\"camera-button camera-send\"\r\n                  onClick={() => {\r\n                    this.readyToSend();\r\n                  }}\r\n                >\r\n                  <Send color=\"rgb(231, 231, 231)\" />\r\n                </button>\r\n                <CameraTools setPenColor={this.setPenColor.bind(this)} />\r\n              </div>\r\n              {this.state.showSendOption && (\r\n                <NewPost\r\n                  userSession={this.props.userSession}\r\n                  img={this.state.img}\r\n                  sendPhoto={this.sendPhoto.bind(this)}\r\n                  closeModal={this.props.closeModal}\r\n                />\r\n              )}\r\n            </React.Fragment>\r\n          )}\r\n        </div>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport Photo from '../Shared/photo';\r\nimport PersonTop from '../Person/PersonTop';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { getFile } from 'blockstack';\r\nconst defaultProfile = '/images/logo.jpg';\r\n\r\nclass PostCard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      img: ''\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const {post} = this.props;\r\n    if (post.attrs.base64) {\r\n      this.setState({\r\n        img : post.attrs.base64\r\n      })\r\n    } else {\r\n      this.getImgFromGaia();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps){\r\n    const {post} = this.props;\r\n\r\n    if(prevProps.post !== this.props.post){\r\n      if (post.attrs.base64) {\r\n        this.setState({\r\n          img : post.attrs.base64\r\n        })\r\n      } else {\r\n        this.getImgFromGaia();\r\n      }    }\r\n  }\r\n\r\n  async getImgFromGaia(){\r\n    const {post} = this.props;\r\n    const img = await getFile(`${post.attrs.address}.json`,{ decrypt: false })\r\n    await this.setState({\r\n      img : JSON.parse(img) || ''\r\n    })\r\n  }\r\n\r\n  randomHeight(){\r\n    const heights = [450, 280,\r\n      550,\r\n      480,\r\n      200,\r\n      540,\r\n      380,\r\n      300,\r\n      400,\r\n      350\r\n      ]\r\n    return heights[Math.floor(Math.random() * heights.length)]\r\n  }\r\n  goToImg(post) {\r\n    this.props.history.push(`/p/${post.attrs._id}`);\r\n  }\r\n  render() {\r\n    const { post } = this.props;\r\n    return (\r\n      <div className='masonry-item' onClick={this.goToImg.bind(this,post)}>\r\n        <div style={{ position: 'relative' }}>\r\n          <div className='post-card-name'>\r\n            <div>{post.attrs.caption}</div>\r\n            {/* <PersonTop username={post.attrs.username} /> */}\r\n          </div>\r\n          <img className='masonry-content' src={this.state.img} alt={post.attrs.username} height={this.randomHeight()} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(PostCard);\r\n","import React, { Component } from 'react';\r\nimport PostCard from \"./PostCard\";\r\n\r\nexport default class Feed extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      posts: [],\r\n      isLoading: false,\r\n      feed : 'public'\r\n    };\r\n  }\r\n\r\n  render(){\r\n    const {posts} = this.props;\r\n    return(\r\n      posts.length === 0 ? (\r\n        <i style={{ paddingTop: \"10px\" }}>No nudes posted</i>\r\n      ) : (\r\n        posts.map(post => {\r\n          return <PostCard \r\n          post={post} />;\r\n        })\r\n      )\r\n    )\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport Post from \"../models/Post\";\r\nimport ReactLoading from \"react-loading\";\r\nimport Feed from \"./PostWrapper\";\r\n\r\nexport default class HomeFeed extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      posts: [],\r\n      isLoading: false,\r\n      feed : 'public'\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.setState({\r\n      isLoading: true\r\n    });\r\n    this.fetchPosts().finally(() => {\r\n      this.setState({\r\n        isLoading: false\r\n      });\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      prevProps.cameraModalIsOpen !== this.props.cameraModalIsOpen &&\r\n      !this.props.cameraModalIsOpen\r\n    ) {\r\n      this.setState({\r\n        isLoading: true\r\n      });\r\n      this.fetchPosts().finally(() => {\r\n        this.setState({\r\n          isLoading: false\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  async fetchPosts() {\r\n    const posts = await Post.fetchList({ sort: \"-createdAt\" }, {decrypt : false});\r\n\r\n    this.setState({\r\n      posts: posts\r\n    });\r\n  }\r\n\r\n  changeFeed(feed){\r\n    this.setState({\r\n      feed : feed\r\n    })\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"home-feed-wrapper col-md-8 container\">\r\n        <div className=\"d-flex justify-content-center align-items-center\">\r\n          <a className=\"mr-2 link link-active feed-tab\" data-toggle=\"tooltip\" title=\"Everyone's public posts\"\r\n          onClick={this.changeFeed.bind(this, 'public')}>\r\n            Public\r\n          </a>\r\n          <a className=\"mr-2 link-light link feed-tab\"  data-toggle=\"tooltip\" title=\"Your friends' private posts\"\r\n          onClick={this.changeFeed.bind(this, 'private')}>\r\n            Private\r\n          </a>\r\n          {/* <a href=\"/\" className=\"link link-light\">\r\n            Collection\r\n          </a> */}\r\n        </div>\r\n        {!this.props.hidden ? \r\n        <div class=\"masonry-wrapper\">\r\n          <div class=\"masonry\">\r\n            {this.state.isLoading ? (\r\n               <div className=\"loading-wrapper\" >\r\n              <ReactLoading\r\n                type={\"spinningBubbles\"}\r\n                color={\"salmon\"}\r\n                height={100}\r\n                width={100}\r\n              />\r\n              </div>\r\n            ) : (this.state.feed === 'public' ? <Feed posts = {this.state.posts}/>\r\n            :\r\n            \"Private feed is in the work\")}\r\n          </div>\r\n        </div>\r\n        :\r\n        <div class=\"masonry-wrapper\">\r\n            <div class=\"masonry\">\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy1.JPG\"\r\n                  alt=\"Dummy\"\r\n                  width=\"auto\"\r\n                  height=\"400\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy2.JPG\"\r\n                  alt=\"Dummy\"\r\n                  height=\"300\"\r\n                  width=\"auto\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy3.JPG\"\r\n                  alt=\"Dummy\"\r\n                  width=\"auto\"\r\n                  height=\"400\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy4.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"290\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy5.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"240\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy6.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"440\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy7.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"430\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy8.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"500\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy9.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"290\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy10.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"450\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy11.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"550\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                 src=\"/images/dummy/dummy12.JPG\"\r\n                 alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"480\"\r\n                 class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy13.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"480\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy14.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"480\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy15.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"480\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy16.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"480\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                 src=\"/images/dummy/dummy17.JPG\"\r\n                 alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"480\"\r\n                 class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy18.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"480\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy19.JPG\"\r\n                  alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"280\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy20.JPG\"\r\n                  alt=\"Dummy\"\r\n                  width=\"auto\"\r\n                  height=\"480\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy21.JPG\"\r\n                  alt=\"Dummy\"\r\n                  width=\"auto\"\r\n                  height=\"480\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                 src=\"/images/dummy/dummy22.JPG\"\r\n                 alt=\"Dummy \"\r\n                  width=\"auto\"\r\n                  height=\"420\"\r\n                 class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy23.JPG\"\r\n                  alt=\"Dummy\"\r\n                  width=\"auto\"\r\n                  height=\"250\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy24.JPG\"\r\n                  alt=\"Dummy\"\r\n                  width=\"auto\"\r\n                  height=\"400\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy25.JPG\"\r\n                  alt=\"Dummy\"\r\n                  width=\"auto\"\r\n                  height=\"550\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n              <div class=\"masonry-item\">\r\n                <img\r\n                  src=\"/images/dummy/dummy26.JPG\"\r\n                  alt=\"Dummy\"\r\n                  width=\"auto\"\r\n                  height=\"300\"\r\n                  class=\"masonry-content\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { UserGroup } from \"radiks/lib\";\r\nimport FriendRequest from \"../models/FriendRequest\";\r\nimport CameraModal from \"../Camera/CameraModal\";\r\nimport { Camera, EyeOff, Eye } from \"react-feather\";\r\nimport HomeFeed from \"./HomeFeed\";\r\nimport HomeMessage from \"./HomeMessage\";\r\n\r\nexport default class Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      cameraModalIsOpen: false,\r\n      hidden: false\r\n    };\r\n  }\r\n  componentDidMount() {}\r\n\r\n  openCameraModal() {\r\n    this.setState({\r\n      cameraModalIsOpen: true\r\n    });\r\n  }\r\n  closeCameraModal() {\r\n    this.setState({\r\n      cameraModalIsOpen: false\r\n    });\r\n  }\r\n  onHide() {\r\n    this.setState({\r\n      hidden: !this.state.hidden\r\n    });\r\n  }\r\n  render() {\r\n    const {userSession} = this.props;\r\n    return (\r\n      <div className=\"home-wrapper container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <HomeFeed\r\n              userSession={this.props.userSession}\r\n              cameraModalIsOpen={this.state.cameraModalIsOpen}\r\n              hidden={this.state.hidden}\r\n            />\r\n          </div>\r\n          {/* <div className=\"col-md-3\">\r\n            <HomeMessage />\r\n          </div> */}\r\n          {this.state.hidden ? (\r\n            <button\r\n              className=\"btn home-hide home-button\"\r\n              data-toggle=\"tooltip\"\r\n              title=\"Show Saucy Pics\"\r\n              onClick={this.onHide.bind(this)}\r\n            >\r\n              <Eye size=\"24\" />\r\n            </button>\r\n          ) : (\r\n            <button\r\n              className=\"btn home-hide home-button\"\r\n              data-toggle=\"tooltip\"\r\n              title=\"Hide Saucy Pics\"\r\n              onClick={this.onHide.bind(this)}\r\n            >\r\n              <EyeOff size=\"24\" />\r\n            </button>\r\n          )}\r\n          {userSession.isUserSignedIn() && <button\r\n            className=\"btn home-camera home-button\"\r\n            data-toggle=\"tooltip\"\r\n            title=\"Open Camera\"\r\n            onClick={this.openCameraModal.bind(this)}\r\n          >\r\n            <Camera size=\"24\" />\r\n          </button>}\r\n          <CameraModal\r\n            userSession={this.props.userSession}\r\n            modalIsOpen={this.state.cameraModalIsOpen}\r\n            closeModal={this.closeCameraModal.bind(this)}\r\n            //  postPhoto={this.sendPhoto.bind(this)}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\nimport {\n  Person,\n} from 'blockstack';\n\nconst avatarFallbackImage = '/images/logo.jpg';\n\nexport default class Profile extends Component {\n  constructor(props) {\n  \tsuper(props);\n\n  \tthis.state = {\n  \t  person: {\n  \t  \tname() {\n          return 'Anonymous';\n        },\n  \t  \tavatarUrl() {\n  \t  \t  return avatarFallbackImage;\n  \t  \t},\n  \t  },\n  \t};\n  }\n\n  render() {\n    const { handleSignOut, userSession } = this.props;\n    const { person } = this.state;\n    return (\n      !userSession.isSignInPending() ?\n      <div className=\"panel-welcome\" id=\"section-2\">\n        <div className=\"avatar-section\" align=\"center\">\n        <div\n                className=\"avatar\"\n                style={{\n                  backgroundImage: `url(${\n                    person.avatarUrl()\n                      ? person.avatarUrl()\n                      : avatarFallbackImage\n                  })`,\n                  backgroundPosition: \"center\",\n                  backgroundSize: \"cover\",\n                  backgroundRepeat: \"no-repeat\"\n                }}\n              />\n        </div>\n        <h1>Hello, <span id=\"heading-name\">{ person.name() ? person.name() : 'Nameless Person' }</span>!</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signout-button\"\n            onClick={ handleSignOut.bind(this) }\n          >\n            Logout\n          </button>\n        </p>\n      </div> : null\n    );\n  }\n\n  componentWillMount() {\n    const { userSession } = this.props;\n    this.setState({\n      person: new Person(userSession.loadUserData().profile),\n    });\n  }\n}\n","import React, { Component } from 'react';\r\n\r\nexport default class Signin extends Component {\r\n\r\n  render() {\r\n    const { handleSignIn } = this.props;\r\n\r\n    return (\r\n      <div className=\"panel-landing\" >\r\n        <div className=\"panel-head\">\r\n\r\n        <h1 className=\"landing-heading\">Welcome to Nuddle</h1>\r\n        <i>Nuddle is a secure space where you can share your saucy photos with your mates. \r\n          {/* All your private photos are encrypted and only have access by you and the people who you want to share with. */}\r\n          </i>\r\n        </div>\r\n        <div>\r\n\r\n        <img src=\"/images/demo.gif\" width=\"700px\"/>\r\n        </div>\r\n        <div>\r\n\r\n          <button\r\n            className=\"btn btn-outline-dark btn-lg\"\r\n            id=\"signin-button\"\r\n            onClick={ handleSignIn.bind(this) }\r\n          >\r\n            Get Naked with Blockstack\r\n          </button>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { User, UserGroup, GroupMembership } from \"radiks\";\r\nimport FriendRequest from \"../models/FriendRequest\";\r\nimport userGroup from \"radiks/lib/models/user-group\";\r\nimport PersonTop from \"../Person/PersonTop\";\r\nimport BlockstackUser from \"../models/BlockstackUser\";\r\n\r\nexport default class FriendSearch extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      input: \"\",\r\n      searchedUsers: [],\r\n      friends: []\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.getMyFriends();\r\n  }\r\n  async onChangeHandler(e) {\r\n    this.setState({\r\n      input: e.target.value\r\n    });\r\n    if (e.target.value.trim() !== \"\") {\r\n      const _searchedUsers = await User.fetchList({\r\n        username: { $regex: e.target.value }\r\n      });\r\n      await this.setState({\r\n        searchedUsers: _searchedUsers\r\n      });\r\n    }\r\n  }\r\n  async addFriend(recipient) {\r\n    const fr = new UserGroup({\r\n      name: \"FriendRequest\"\r\n    });\r\n    await fr.create();\r\n    const groupMembership = new GroupMembership({\r\n      userGroupId: fr._id,\r\n      username: User.currentUser()._id,\r\n      signingKeyPrivateKey: fr.privateKey,\r\n      signingKeyId: fr.attrs.signingKeyId\r\n    });\r\n\r\n    await groupMembership.save();\r\n    const memberShip = await fr.makeGroupMembership(recipient);\r\n    const request = new FriendRequest({\r\n      sender: User.currentUser()._id,\r\n      recipient: recipient,\r\n      userGroupId: fr._id,\r\n      invitationId: memberShip._id\r\n    });\r\n    await request.save();\r\n\r\n    const _friends = this.state.friends;\r\n    _friends.push(recipient);\r\n    this.setState({\r\n      friends : _friends\r\n    })\r\n    const me = await BlockstackUser.findOne({\r\n      username: User.currentUser()._id\r\n    });\r\n    me.update({\r\n      friends: _friends\r\n    });\r\n    await me.save();\r\n  }\r\n  async getMyFriends() {\r\n    const me = await BlockstackUser.findOne({\r\n      username: User.currentUser()._id\r\n    });\r\n    if (me.attrs.friends) {\r\n      this.setState({\r\n        friends: me.attrs.friends\r\n      });\r\n    }\r\n  }\r\n  isFriend(username) {\r\n    if (this.state.friends.includes(username)) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  isMe(username) {\r\n    if (username === User.currentUser()._id) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"nav-link\">\r\n        <input\r\n          id=\"search-input\"\r\n          type=\"text\"\r\n          className=\"form-control friend-search\"\r\n          // style={{ fontFamily: 'Arial, FontAwesome' }}\r\n          placeholder=\"Search for Nudist\"\r\n          value={this.state.input}\r\n          onChange={this.onChangeHandler.bind(this)}\r\n          // onBlur={this.props.closeSearch}\r\n          // onMouseLeave={this.props.closeSearch}\r\n        />\r\n        {this.state.input !== \"\" && (\r\n          <ul className=\"list-group m-0 p-0\" id=\"searchedUsers\">\r\n            {this.state.searchedUsers.map(user => {\r\n              return (\r\n                <li className=\"list-group-item m-0 p-0 seached-user-li\">\r\n                  <PersonTop username={user.attrs.username} />\r\n                  {this.isFriend(user.attrs.username) ||\r\n                  this.isMe(user.attrs.username) ? (\r\n                    <div></div>\r\n                  ) : (\r\n                    <div>\r\n                      <button\r\n                        className=\"btn btn-light add-friend-butt\"\r\n                        onClick={this.addFriend.bind(this, user.attrs.username)}\r\n                      >\r\n                        Add friend <i class=\"fas fa-plus\"></i>\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default class TimeStamp {\r\n    static convertDate(posted) {\r\n        var postedTime = new Date(posted);\r\n        var currentTime = new Date();\r\n        var timeDiff = currentTime - postedTime;\r\n        var timeString = \" ago\";\r\n\r\n        var secDiff = Math.floor(timeDiff / 1000);\r\n        if(secDiff <= 60) {\r\n            timeString = secDiff.toString()+\"s ago\"\r\n        } else {\r\n            var minDiff = Math.floor(timeDiff / 1000 / 60);\r\n            if(minDiff <= 60) {\r\n                timeString = minDiff.toString()+\"m ago\"\r\n            } else {\r\n                var hourDiff=  Math.floor(timeDiff / 1000 / 3600);\r\n                \r\n                if (hourDiff <= 24) {\r\n                    timeString = hourDiff.toString() \r\n                    if (hourDiff > 1){\r\n                        timeString+=\" HOURS AGO\";\r\n                    } else{\r\n                        timeString+=\" HOUR AGO\";\r\n                    }\r\n                } else {\r\n                    var dayDiff = Math.floor(hourDiff/24);\r\n                    if (dayDiff <=7) {\r\n                        timeString = dayDiff.toString();\r\n                        if (dayDiff > 1){\r\n                            timeString+=\" DAYS AGO\";\r\n                        } else{\r\n                            timeString+=\" DAY AGO\";\r\n                        }\r\n                    } else {\r\n                        var options = { year : 'numeric', month: 'long', day : 'numeric' }\r\n                        timeString = postedTime.toLocaleDateString('en-US',options)\r\n                    }   \r\n                }\r\n            }\r\n        }\r\n        // this.setState({\r\n        //     timePosted : timeString\r\n        // })\r\n        return timeString\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { User } from \"radiks\";\r\nimport { Person, lookupProfile } from \"blockstack\";\r\nimport groupInvitation from \"radiks/lib/models/group-invitation\";\r\nimport PersonTop from \"../Person/PersonTop\";\r\nimport BlockstackUser from \"../models/BlockstackUser\";\r\nimport { CheckCircle } from \"react-feather\";\r\nimport TimeStamp from \"../Shared/timestamp\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\n\r\nexport default class FriendRequestItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      person : {\r\n        name() {\r\n          return \"Anonymous\";\r\n        },\r\n        avatarUrl() {\r\n          return defaultProfile;\r\n        },\r\n        description() {\r\n          return \"No bio\";\r\n        }\r\n      },\r\n      friends : []\r\n    };\r\n  }\r\n\r\n  async componentDidMount(){\r\n    const me = await BlockstackUser.findOne({ username: User.currentUser()._id });\r\n    if (me.attrs.friends) {\r\n      this.setState({\r\n        friends : me.attrs.friends\r\n      })\r\n    }\r\n  }\r\n  getProfile() {\r\n    const {fr} = this.props;\r\n\r\n    lookupProfile(fr.attrs.sender)\r\n      .then(profile => {\r\n        this.setState({\r\n          person: new Person(profile)\r\n        });\r\n      })\r\n      .catch(error => {\r\n      });\r\n  }\r\n  async acceptFR(){\r\n    const {fr} = this.props;\r\n    const invitation = await groupInvitation.findById(fr.attrs.invitationId);\r\n    await invitation.activate();\r\n    const _friends = this.state.friends;\r\n    _friends.push(fr.attrs.sender);\r\n    this.setState({\r\n      friends : _friends\r\n    })\r\n    const me = await BlockstackUser.findOne({ username: User.currentUser()._id });\r\n    me.update({\r\n      friends  : _friends\r\n    })\r\n    await me.save()\r\n  }\r\n  isFriend(username){\r\n    if (this.state.friends.includes(username)){\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n \r\n  render(){\r\n    const {fr} = this.props;\r\n\r\n    return(\r\n        <li className=\"list-group-item seached-user-li\">\r\n            \r\n            <PersonTop username={fr.attrs.sender}/>\r\n            <div>\r\n            {this.isFriend(fr.attrs.sender) ? \r\n            <div>\r\n              <button className=\"btn btn-light add-friend-butt disabled\">\r\n                <CheckCircle color=\"salmon\"/>\r\n               </button>\r\n            </div>\r\n            :\r\n             <div>\r\n               <button className=\"btn btn-light add-friend-butt\" onClick={this.acceptFR.bind(this)}>\r\n                 Accept \r\n               </button>\r\n             </div>\r\n            }\r\n            <small>\r\n            {TimeStamp.convertDate(fr.attrs.createdAt).toLowerCase()}\r\n            </small>\r\n            </div>\r\n           </li>\r\n    )\r\n  }\r\n}","\r\nimport React, { Component } from \"react\";\r\nimport BlockstackUser from \"../models/BlockstackUser\";\r\nimport { User, UserGroup, GroupInvitation } from \"radiks\";\r\nimport FriendRequest from \"../models/FriendRequest\";\r\nimport userGroup from \"radiks/lib/models/user-group\";\r\nimport ReactLoading from 'react-loading';\r\nimport FriendRequestItem from \"./FriendRequestItem\";\r\nimport { UserPlus } from \"react-feather\";\r\n\r\nexport default class FriendRequests extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      frButtonClicked : false,\r\n      friendRequests : [],\r\n      isLoading : false\r\n    };\r\n  }\r\n  async getFriendRequests(){\r\n    this.setState({\r\n      frButtonClicked : !this.state.frButtonClicked\r\n    }, async ()=>{\r\n      if (this.state.frButtonClicked) {\r\n        this.setState({\r\n          isloading : true\r\n        })\r\n        const _requests = await FriendRequest.fetchList({recipient : User.currentUser()._id}, {decrypt : true});     \r\n        this.setState({\r\n          isloading : false\r\n        })\r\n        // const invitation = await GroupInvitation.findById(requests[requests.length-1].attrs.invitationId);\r\n        // await invitation.activate();\r\n        // const group = await UserGroup.find(requests[requests.length-1].attrs.userGroupId);\r\n        // console.log(group)\r\n        this.setState({\r\n          friendRequests : _requests          \r\n        })\r\n         \r\n      }\r\n    })\r\n   \r\n\r\n  }\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n      <button className=\"nav-link btn\" onClick={this.getFriendRequests.bind(this)} data-toggle=\"tooltip\" title=\"Check friend requests\">\r\n        <UserPlus/>\r\n      </button>\r\n      {this.state.frButtonClicked && (\r\n      <div className=\"fr-dropdown\">  \r\n        {this.state.isloading ? \r\n        <ReactLoading type={'spinningBubbles'} color={'salmon'} height={100} width={100} />\r\n        :\r\n        (this.state.friendRequests.length === 0 ?\r\n      <div>Aw it's okay little boo if noone wanna see your nud</div>\r\n       :\r\n       <ul className=\"list-group friend-request-list\">\r\n       {this.state.friendRequests.map(fr => {\r\n         return (\r\n           <FriendRequestItem fr = {fr}/>\r\n         );\r\n       })}\r\n      </ul>)}</div>)\r\n      }\r\n     </React.Fragment>\r\n    )\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport FriendSearch from \"./FriendSearch\";\r\nimport FriendRequests from \"./FriendRequests\";\r\nimport {\r\n  Menu,\r\n  LogOut,\r\n  RefreshCcw,\r\n  MessageSquare,\r\n  Search,\r\n  Edit,\r\n  ArrowLeft\r\n} from \"react-feather\";\r\nimport PersonTop from \"../Person/PersonTop\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\n\r\nexport default class Nav extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchOpened: false\r\n    };\r\n  }\r\n  openSearch() {\r\n    this.setState({\r\n      searchOpened: true\r\n    });\r\n  }\r\n  closeSearch() {\r\n    this.setState({\r\n      searchOpened: false\r\n    });\r\n  }\r\n  render() {\r\n    const { handleSignOut, userSession } = this.props;\r\n    const { person } = this.state;\r\n    return (\r\n      <nav className=\"navbar p-3 navbar-expand-md bg-light \">\r\n        {userSession.isUserSignedIn() ? \r\n        <PersonTop username={userSession.loadUserData().username}/>\r\n        :\r\n        <div>\r\n           <Link\r\n            className=\"btn btn-outline-dark\"\r\n            id=\"signin-button\"\r\n            to=\"/signin\"\r\n          >\r\n            Get Naked with Blockstack\r\n          </Link>\r\n        </div>\r\n        }\r\n        <Link to=\"/\" className=\"navbar-brand d-md-none d-inline\">\r\n          <img src=\"/favicon.ico\" />\r\n        </Link>\r\n\r\n        <button\r\n          className=\"navbar-toggler ml-1\"\r\n          type=\"button\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#collapsingNavbar2\"\r\n        >\r\n          <Menu color=\"#252631\" />\r\n        </button>\r\n\r\n        <div\r\n          className=\"navbar-collapse collapse \r\n           w-100\"\r\n          id=\"collapsingNavbar2\"\r\n        >\r\n          <ul className=\"nav navbar-nav col-md-5 d-flex justify-content-end align-items-center\">\r\n            <li className=\"nav-item my-auto\">\r\n              <Link\r\n                className=\"nav-link navbar-brand mx-0 d-none d-md-inline\"\r\n                to=\"/\"\r\n              >\r\n                Nuddle\r\n              </Link>\r\n            </li>\r\n          </ul>\r\n          {userSession.isUserSignedIn() && <ul className=\"nav navbar-nav col-md-7  flex-nowrap\">\r\n            <div className=\"d-flex col justify-content-end\">\r\n            <li>\r\n                  {this.state.searchOpened ? (\r\n                    <FriendSearch closeSearch={this.closeSearch.bind(this)} />\r\n                  ) : (\r\n                    <div\r\n                      className=\"nav-link\"\r\n                      onMouseEnter={this.openSearch.bind(this)}\r\n                    >\r\n                      <Search />\r\n                    </div>\r\n                  )}\r\n                </li>\r\n                <li\r\n                  className=\"nav-item\"\r\n                  data-toggle=\"tooltip\"\r\n                  title=\"Friend Requests\"\r\n                >\r\n                  <FriendRequests/>\r\n                </li>\r\n              \r\n              </div>\r\n\r\n            <div className=\"d-flex col-md-6 justify-content-between align-items-center\">\r\n              <div className=\"d-flex\">\r\n              <li className=\"nav-item\">\r\n                <Link\r\n                  className=\"nav-link\"\r\n                  to=\"/chat\"\r\n                  data-toggle=\"tooltip\"\r\n                  title=\"Chat\"\r\n                >\r\n                  <MessageSquare />\r\n                </Link>\r\n              </li>\r\n              <li\r\n                className=\"nav-item\"\r\n                data-toggle=\"tooltip\"\r\n                title=\"Refresh feed\"\r\n              >\r\n                <Link to=\"/\" className=\"nav-link\">\r\n                  <RefreshCcw />\r\n                </Link>\r\n              </li>\r\n              <li className=\"nav-item\" data-toggle=\"tooltip\" title=\"Log Out\">\r\n                <a className=\"nav-link\" onClick={this.props.handleSignOut}>\r\n                  <LogOut />\r\n                </a>\r\n              </li>\r\n            \r\n               </div>\r\n            </div>\r\n          </ul>\r\n        }\r\n        </div>\r\n      </nav>\r\n\r\n      //   <nav className=\"navbar navbar-dark navbar-static-top\">\r\n      //   <a className=\"navbar-brand\" href=\"https://nuddle.me\">\r\n      //     <img src={defaultProfile} alt=\"nuddle logo\" width=\"100px\"/>\r\n      //   </a>\r\n      //   <button\r\n      //       className=\"navbar-toggler\"\r\n      //       type=\"button\"\r\n      //       data-toggle=\"collapse\"\r\n      //       data-target=\"#navbarNavAltMarkup\"\r\n      //       aria-controls=\"navbarNavAltMarkup\"\r\n      //       aria-expanded=\"false\"\r\n      //       aria-label=\"Toggle navigation\"\r\n      //     >\r\n      //       <span className=\"navbar-toggler-icon\"></span>\r\n      //     </button>\r\n      //   <FriendSearch/>\r\n      //   <FriendRequests/>\r\n      //   <div className=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\">\r\n      //     <div className=\"navbar-nav ml-auto\">\r\n      //     {/* {userSession.isUserSignedIn() && ( */}\r\n      //           <Link\r\n      //             to={\"/profile\"}\r\n      //             className=\"nav-item\"\r\n      //           >\r\n      //             Profile\r\n      //           </Link>\r\n      //         {/* )} */}\r\n      //     </div>\r\n      //   </div>\r\n      // </nav>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Modal from 'react-modal';\r\nimport FriendList from \"./FriendList\";\r\nModal.setAppElement('body')\r\n\r\nconst customStyles = {\r\n  content : {\r\n    top                   : '50%',\r\n    left                  : '50%',\r\n    right                 : 'auto',\r\n    bottom                : 'auto',\r\n    marginRight           : '-50%',\r\n    transform             : 'translate(-50%, -50%)',\r\n    width : '500px'\r\n  }\r\n};\r\n\r\nexport default class NewChat extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  } \r\n  render() {\r\n    return (\r\n      <Modal\r\n        isOpen={this.props.modalIsOpen}\r\n        onRequestClose={this.props.closeModal}\r\n        style={customStyles}\r\n        contentLabel=\"New Chat\"\r\n      >\r\n        <FriendList/>\r\n     </Modal>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { User, UserGroup } from \"radiks\";\r\nimport NewChat from \"./NewChat\"\r\nimport ChatListItem from \"./ChatListItem\"\r\nimport { Edit3 } from \"react-feather\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\nexport default class ChatList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      newChatModalIsOpen : false,\r\n      groups: []\r\n    };\r\n  }\r\n  componentDidMount(){\r\n    this.getMyChats()\r\n  }\r\n  async getMyChats(){\r\n    const groups = await UserGroup.myGroups();\r\n    let finalGroups = [];\r\n    for(let group of groups){\r\n      if (group.attrs.members.length === 2){\r\n        finalGroups.push(group);\r\n      }\r\n    }\r\n    this.setState({\r\n      groups : finalGroups\r\n    })\r\n  }\r\n  openNewChatModal() {\r\n    this.setState({\r\n      newChatModalIsOpen: true\r\n    });\r\n  }\r\n  closeNewChatModal() {\r\n    this.setState({\r\n      newChatModalIsOpen: false\r\n    });\r\n  }\r\n \r\n  render() {\r\n    return (\r\n      <div className=\"chat-list-wrapper\">\r\n        <div>\r\n          <h1>Chats</h1>\r\n          {/* <div className=\"chat-header\">\r\n          <p>Chats</p>\r\n          <button className=\"btn btn-light\" data-toggle=\"tooltip\" title=\"New chat\"\r\n          onClick={this.openNewChatModal.bind(this)}><Edit3/></button>\r\n          </div>\r\n          <NewChat  modalIsOpen={this.state.newChatModalIsOpen}\r\n          closeModal={this.closeNewChatModal.bind(this)}/> */}\r\n        </div>\r\n        <div className=\"chat-list\">\r\n          {this.state.groups.length === 0 ? \r\n          \"You don't have any saucy convo yet. Initite some\" :\r\n          this.state.groups.map(group => {\r\n            return (\r\n              <ChatListItem group={group}\r\n              selectChat = {this.props.selectChat}/>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { Model, UserGroup, User } from \"radiks\";\r\n\r\nexport default class Message extends Model {\r\n  static className = \"Message\";\r\n  static schema = {\r\n    sender : {\r\n      type: String,\r\n      required : true\r\n    },\r\n    content: {\r\n      type: String,\r\n      // required : true\r\n    },\r\n    byte: {\r\n      type: ArrayBuffer,\r\n      // required : true\r\n    },\r\n    type: {\r\n      type: String, //text, 'image','video','expirable-image'\r\n      required : true\r\n    },\r\n    duration : {\r\n      type : Number //seconds\r\n    },\r\n    userGroupId: {\r\n      type: String,\r\n      decrypted: true,\r\n      required : true\r\n    }\r\n\r\n  };\r\n  static defaults = {\r\n  }\r\n  static async sendTextMsg(txt , userGroupId){\r\n    const msg = new Message({\r\n      sender : User.currentUser()._id,\r\n      content : txt,\r\n      type : 'text',\r\n      userGroupId : userGroupId\r\n    })\r\n    await msg.save()\r\n    return msg;\r\n  }\r\n\r\n  static async sendPhotoMsg(binary , userGroupId){\r\n    const msg = new Message({\r\n      sender : User.currentUser()._id,\r\n      byte : binary,\r\n      type : 'photo',\r\n      userGroupId : userGroupId\r\n    })\r\n    await msg.save()\r\n    return msg;\r\n  }\r\n\r\n  static async sendExpirablePhotoMsg(binary, duration, userGroupId){\r\n    const msg = new Message({\r\n      content : binary,\r\n      type : 'expirable-photo',\r\n      duration: duration,\r\n      userGroupId : userGroupId\r\n    })\r\n    await msg.save()\r\n  }\r\n}\r\n// export default class PrivateGroupMessage extends UserGroup {\r\n//   static schema = {\r\n//     ...UserGroup.schema,\r\n//     description: {\r\n//       type: String\r\n//     },\r\n// };\r\n// }","import React, { Component } from \"react\";\r\nimport { Smile } from \"react-feather\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport { Camera } from \"react-feather\";\r\nimport { Link } from \"react-router-dom\";\r\nimport CameraModal from \"../Camera/CameraModal\";\r\nimport Message from \"../models/Message\"\r\nimport Photo from \"../Shared/photo\";\r\n\r\n\r\nconst TEXT_LIMIT = 1000;\r\n\r\nexport default class MessageInput extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      newComment: \"\",\r\n      characters: TEXT_LIMIT,\r\n      showEmojiPicker: false,\r\n      cameraModalIsOpen: false\r\n    };\r\n  }\r\n  componentDidMount(){\r\n  }\r\n  addEmoji(emoji) {\r\n    this.setState({\r\n      newComment: this.state.newComment + emoji.native,\r\n      characters: this.state.characters + 1\r\n    });\r\n  }\r\n  /**\r\n   * not being used\r\n   * @param {*} event \r\n   */\r\n  setNewComment(event) {\r\n    if (this.state.characters < TEXT_LIMIT) {\r\n      this.setState({\r\n        newComment: event.target.value,\r\n        characters: event.target.value.length\r\n      });\r\n      if (event.target.value.length >= TEXT_LIMIT) {\r\n      }\r\n    }\r\n  }\r\n  async sendMessage(event){\r\n    if(event.key === \"Enter\"){\r\n      event.preventDefault()\r\n      try {\r\n        const newMessage = await Message.sendTextMsg(this.state.newComment, this.props.chatRoomId)\r\n        await this.props.sendMessage(newMessage)\r\n        await this.setState({\r\n          newComment : '',\r\n          characters: TEXT_LIMIT\r\n        })\r\n      } catch(e){\r\n\r\n      }\r\n    }\r\n  }\r\n  async sendPhoto(b64Data, chatRoomId){\r\n    const {userSession} = this.props;\r\n\r\n    const byteArray = Photo.b64tobinary(b64Data)\r\n    try {\r\n      const newMessage = await Message.sendPhotoMsg(byteArray, chatRoomId)\r\n      await this.props.sendMessage(newMessage)\r\n    } catch(e){\r\n\r\n    }\r\n  }\r\n  \r\n  handleChange(event) {\r\n    var appropriateLengthWords = event.target.value.substring(\r\n      0,\r\n      TEXT_LIMIT - 1\r\n    );\r\n    this.setState({\r\n      newComment: appropriateLengthWords,\r\n      characters: TEXT_LIMIT - event.target.value.length\r\n    });\r\n  }\r\n  toggleEmojiPicker() {\r\n    this.setState({\r\n      showEmojiPicker: !this.state.showEmojiPicker\r\n    });\r\n  }\r\n  openCameraModal() {\r\n    this.setState({\r\n      cameraModalIsOpen: true\r\n    });\r\n  }\r\n  closeCameraModal() {\r\n    this.setState({\r\n      cameraModalIsOpen: false\r\n    });\r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div className=\"input-wrapper\">\r\n        <div>\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              display: \"flex\",\r\n              flexDirection: \" column \"\r\n            }}\r\n          >\r\n            <textarea\r\n              id=\"commentInput\"\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"Drop a thought...\"\r\n              value={this.state.newComment}\r\n              onChange={this.handleChange.bind(this)}\r\n              onKeyDown={event => this.sendMessage(event)}\r\n            />\r\n            <div style={{ alignSelf: \"flex-end\" }}>\r\n              <small>\r\n                {this.state.characters}/{TEXT_LIMIT}\r\n              </small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"emoji-div\"\r\n          style={{ alignSelf: \"flex-start\", position: \"relative\" }}\r\n        >\r\n          <button\r\n            type=\"button \"\r\n            className=\"btn btn-emoji\"\r\n            data-toggle=\"tooltip\"\r\n            title=\"Insert an emoji\"\r\n            onClick={this.toggleEmojiPicker.bind(this)}\r\n            style={{ paddingTop: \"5px\" }}\r\n          >\r\n            <Smile size={\"24\"} />\r\n          </button>\r\n          <button\r\n            className=\"btn btn-emoji\"\r\n            onClick={this.openCameraModal.bind(this)}\r\n          >\r\n            <Camera size=\"24\" />\r\n          </button>\r\n          {this.state.showEmojiPicker && (\r\n            <Picker set=\"emojione\" onSelect={this.addEmoji.bind(this)} />\r\n          )}\r\n        </div>\r\n        <CameraModal\r\n          userSession={this.props.userSession}\r\n          modalIsOpen={this.state.cameraModalIsOpen}\r\n          closeModal={this.closeCameraModal.bind(this)}\r\n          sendPhoto={this.sendPhoto.bind(this)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport TimeStamp from \"../Shared/timestamp\";\r\nimport { UserSession } from \"blockstack\";\r\nimport Photo from \"../Shared/photo\";\r\nimport { User } from \"radiks/lib\";\r\nconst defaultProfile = \"/images/logo.jpg\";\r\n\r\nexport default class MessageItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n  componentDidMount(){\r\n  }\r\n  isMyMsg(username){\r\n    if (username === User.currentUser()._id){\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const {msg} = this.props;\r\n    return (\r\n      <div className=\"msg-item-wrapper\">\r\n      <div className={\"msg-item \"+(this.isMyMsg(msg.attrs.sender) ? \"my-msg\":\"\")}>\r\n        <div style={{ padding: \"0px 10px\" }}>\r\n          <div\r\n            className=\"photos\"\r\n            style={{\r\n              backgroundImage: `url(${defaultProfile})`,\r\n              backgroundPosition: \"center\",\r\n              backgroundSize: \"cover\",\r\n              backgroundRepeat: \"no-repeat\"\r\n            }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <i>{msg.attrs.sender}</i>\r\n          <div className=\"msg-body\">\r\n            {msg.attrs.type==='text' && \r\n          <div>{msg.attrs.content}</div>}\r\n                      {msg.attrs.type==='photo' && \r\n          <img src={Photo.toBlob(this.props.msg.attrs.byte)} width=\"200px\"/>}\r\n          <small className=\"timestamp\">{TimeStamp.convertDate(msg.attrs.createdAt)}</small>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>            \r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport ChatList from \"./ChatList\";\r\nimport MessageInput from \"./MessageInput\";\r\nimport MessageItem from \"./MessageItem\";\r\nimport { withRouter } from \"react-router\";\r\nimport Message from \"../models/Message\";\r\nimport ReactLoading from 'react-loading';\r\n\r\nclass ChatRoom extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      messageList: [],\r\n      img: \"\",\r\n      isLoading: false\r\n    };\r\n    const messageCallBack = message => {\r\n      if (\r\n        message.attrs.userGroupId === this.props.match.params.chatRoomId\r\n      ) {\r\n        this.fetchMessages();\r\n      }\r\n    };\r\n    Message.addStreamListener(messageCallBack.bind(this));\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.match.params.chatRoomId) {\r\n      this.fetchMessages();\r\n    }\r\n  }\r\n  startLoading(){\r\n    this.setState({\r\n      isLoading: true\r\n    })\r\n  }\r\n  endLoading(){\r\n    this.setState({\r\n      isLoading: false\r\n    })\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      prevProps.match.params.chatRoomId !==\r\n        this.props.match.params.chatRoomId &&\r\n      this.props.match.params.chatRoomId\r\n    ) {\r\n      this.startLoading()\r\n      this.fetchMessages().finally(()=>this.endLoading());\r\n    }\r\n  }\r\n  async fetchMessages() {\r\n    const messages = await Message.fetchList({\r\n      userGroupId: this.props.match.params.chatRoomId\r\n    });\r\n    // for(let msg of messages) {\r\n    //   await msg.destroy()\r\n    // }\r\n    this.setState({\r\n      messageList: messages\r\n    });\r\n  }\r\n\r\n  sendMessage(newMessage) {\r\n    let _messages = this.state.messageList;\r\n    _messages.push(newMessage);\r\n    this.setState({\r\n      messageList: _messages\r\n    });\r\n  }\r\n \r\n  render() {\r\n    return (\r\n      <div className=\"chat-room-wrapper\">\r\n        <div className=\"chat-room\">\r\n          {!this.props.match.params.chatRoomId ? (\r\n            <div>Select a friend to nuddle</div>\r\n          ) : this.state.isLoading ? (\r\n            <ReactLoading\r\n              type={\"spinningBubbles\"}\r\n              color={\"salmon\"}\r\n              height={100}\r\n              width={100}\r\n            />\r\n          ) : this.state.messageList.length === 0 ? (\r\n            <i>\r\n              You don't have any message with this nudist. Spice it up now ;)\r\n            </i>\r\n          ) : (\r\n            this.state.messageList.map(msg => {\r\n              return <MessageItem msg={msg} \r\n              userSession = {this.props.userSession}/>;\r\n            })\r\n          )\r\n          }\r\n        </div>\r\n\r\n        <MessageInput\r\n          userSession={this.props.userSession}\r\n          sendMessage={this.sendMessage.bind(this)}\r\n          // postPhoto={this.postPhoto.bind(this)}\r\n          chatRoomId={this.props.match.params.chatRoomId}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ChatRoom);\r\n","import React, { Component } from \"react\";\r\nimport ChatList from \"./ChatList\";\r\nimport ChatRoom from \"./ChatRoom\";\r\n\r\nexport default class Chat extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedFriend: null\r\n    };\r\n  }\r\n  selectChat(selectedFriend){\r\n    this.setState({\r\n      selectedFriend : selectedFriend\r\n    })\r\n  }\r\n  componentDidMount(){\r\n  }\r\n  render(){\r\n    return(\r\n      <div className=\"chat-wrapper\">\r\n        <ChatList selectChat={this.selectChat.bind(this)}/>\r\n        <ChatRoom \r\n        userSession={this.props.userSession}\r\n        selectedFriend={this.state.selectedFriend} />\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport Post from '../models/Post';\r\nimport PersonTop from '../Person/PersonTop';\r\n\r\nexport default class SinglePost extends Component {\r\n  constructor(props) {\r\n  \tsuper(props);\r\n\r\n  \tthis.state = {\r\n      post : {\r\n        attrs : {\r\n          username : 'Nudist',\r\n          base64 : ''\r\n        }\r\n      },\r\n      img : ''\r\n  \t};\r\n  }\r\n  componentDidMount(){\r\n    const id = this.props.match.params.postId;\r\n    if (id) {\r\n      this.getPost();\r\n    } else {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n  async getPost(){\r\n    const id = this.props.match.params.postId;\r\n    const post = await Post.findOne({_id : id},{decrypt : false});\r\n    if(post) {\r\n      this.setState({\r\n        post : post\r\n      }, () => {\r\n        if (this.state.post.attrs.base64) {\r\n          this.setState({\r\n            img : this.state.post.attrs.base64\r\n          })\r\n        } else {\r\n          this.getImgFromGaia();\r\n        }\r\n      })\r\n    } else {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n  async getImgFromGaia(){\r\n    const {post} = this.state;\r\n    const {userSession} = this.props;\r\n    const img = await userSession.getFile(`${post.attrs.address}.json`,{ decrypt: false })\r\n    await this.setState({\r\n      img : JSON.parse(img) || ''\r\n    })\r\n  }\r\n  render() {\r\n    const {post, img} = this.state;\r\n    return (\r\n      <div className=\"single-post-wrapper\">\r\n        <div>\r\n        <img src={img}/>\r\n        <p>{post.attrs.caption}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from \"react\";\r\nimport { UserSession, AppConfig, config } from \"blockstack\";\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\nimport { User, configure, getConfig } from \"radiks\";\r\n\r\nimport Home from \"./Home/Home.jsx\";\r\nimport Profile from \"./Profile/Profile.jsx\";\r\nimport Signin from \"./Nav/Signin.jsx\";\r\nimport Nav from \"./Nav/Nav.jsx\";\r\nimport Chat from \"./Chat/Chat.jsx\";\r\nimport CameraModal from \"./Camera/CameraModal.jsx\";\r\nimport SinglePost from \"./Post/SinglePost.jsx\";\r\n\r\nconst appConfig = new AppConfig([\"store_write\", \"publish_data\"]);\r\nconst userSession = new UserSession({ appConfig: appConfig });\r\n// const apiServer = 'https://nuddle-server.herokuapp.com';\r\n\r\nconst apiServer =\r\n  process.env.NODE_ENV === \"development\"\r\n    ? \"http://localhost:5000\"\r\n    : \"https://nuddle-server.herokuapp.com\";\r\nconfigure({\r\n  apiServer: apiServer,\r\n  userSession\r\n});\r\nconfig.logLevel = \"none\";\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      userSession\r\n    };\r\n  }\r\n\r\n  handleSignIn(e) {\r\n    e.preventDefault();\r\n    userSession.redirectToSignIn();\r\n  }\r\n\r\n  handleSignOut(e) {\r\n    e.preventDefault();\r\n    userSession.signUserOut(window.location.origin);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"site-wrapper\">\r\n        {!userSession.isUserSignedIn() ? (\r\n          <Signin userSession={userSession}\r\n                  handleSignIn={this.handleSignIn}  />\r\n          // <React.Fragment>\r\n          //   <Nav\r\n          //     userSession={userSession}\r\n          //     handleSignOut={this.handleSignOut.bind(this)}\r\n          //   />\r\n          //   <div className=\"inner-wrapper\">\r\n          //     <Switch>\r\n          //       <Route\r\n          //         exact\r\n          //         path=\"/\"\r\n          //         exact={true}\r\n          //         render={props => (\r\n          //           <Home\r\n          //             {...props}\r\n          //             userSession={userSession}\r\n          //             handleSignIn={this.handleSignIn}\r\n          //           />\r\n          //         )}\r\n          //       />\r\n          //       <Route\r\n          //         exact\r\n          //         path={`/p/:postId`}\r\n          //         exact={true}\r\n          //         render={props => <SinglePost {...props}\r\n          //         userSession={userSession}\r\n          //         />}\r\n          //       />\r\n          //       <Route\r\n          //         exact\r\n          //         path={`/signin`}\r\n          //         exact={true}\r\n          //         render={props => (\r\n          //           <Signin\r\n          //             {...props}\r\n          //             userSession={userSession}\r\n          //             handleSignIn={this.handleSignIn}\r\n          //           />\r\n          //         )}\r\n          //       />\r\n          //       <Redirect to=\"/\" />\r\n          //     </Switch>\r\n          //   </div>\r\n          // </React.Fragment>\r\n        ) : (\r\n          <React.Fragment>\r\n            <Nav\r\n              userSession={userSession}\r\n              handleSignOut={this.handleSignOut.bind(this)}\r\n            />\r\n            <div className=\"inner-wrapper\">\r\n              <Switch>\r\n                <Route\r\n                  exact\r\n                  path=\"/\"\r\n                  exact={true}\r\n                  render={props => (\r\n                    <Home\r\n                      {...props}\r\n                      userSession={userSession}\r\n                      handleSignIn={this.handleSignIn}\r\n                    />\r\n                  )}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/profile`}\r\n                  exact={true}\r\n                  render={props => (\r\n                    <Profile\r\n                      {...props}\r\n                      userSession={userSession}\r\n                      handleSignOut={this.handleSignOut.bind(this)}\r\n                    />\r\n                  )}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/chat`}\r\n                  exact={true}\r\n                  render={props => (\r\n                    <Chat {...props} userSession={userSession} />\r\n                  )}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/chat/:chatRoomId`}\r\n                  exact={true}\r\n                  render={props => (\r\n                    <Chat {...props} userSession={userSession} />\r\n                  )}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/camera`}\r\n                  exact={true}\r\n                  render={props => <CameraModal {...props} />}\r\n                />\r\n                <Route\r\n                  exact\r\n                  path={`/p/:postId`}\r\n                  exact={true}\r\n                  render={props => <SinglePost {...props}\r\n                  userSession={userSession}\r\n                  />}\r\n                />\r\n                <Redirect to=\"/\" />\r\n              </Switch>\r\n            </div>\r\n          </React.Fragment>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (userSession.isSignInPending()) {\r\n      userSession.handlePendingSignIn().then(async userData => {\r\n        window.history.replaceState({}, document.title, \"/\");\r\n        this.setState({ userData: userData });\r\n        await User.createWithCurrentUser();\r\n      });\r\n    }\r\n    // else if(userSession.isUserSignedIn()) {\r\n\r\n    // }\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom'\r\nimport App from './App.jsx';\r\n\r\n// Require Sass file so webpack can build it\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport'./styles/style.scss';\r\n\r\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}